<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Modern Financial Portfolio Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Open Sans"', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            DEFAULT: '#10b981',
                            light: '#6ee7b7',
                            dark: '#059669'
                        },
                        secondary: {
                            DEFAULT: '#06b6d4',
                            light: '#67e8f9',
                            dark: '#0e7490'
                        },
                        dark: {
                            DEFAULT: '#020617',
                            light: '#0f172a',
                            lighter: '#1e293b'
                        },
                        success: '#10b981',
                        danger: '#ef4444',
                        warning: '#f59e0b',
                        info: '#3b82f6'
                    },
                    boxShadow: {
                        'glass': '0 4px 30px rgba(0, 0, 0, 0.1)',
                        'glow-primary': '0 0 16px 2px rgba(16, 185, 129, 0.5)',
                        'glow-secondary': '0 0 12px 2px rgba(6, 182, 212, 0.5)',
                        'glow-danger': '0 0 10px 2px rgba(239, 68, 68, 0.5)',
                        'glow-success': '0 0 10px 2px rgba(16, 185, 129, 0.5)'
                    },
                    backdropBlur: {
                        xs: '2px',
                        sm: '4px',
                        DEFAULT: '8px',
                        md: '12px',
                        lg: '16px',
                        xl: '24px',
                    }
                }
            }
        }
    </script>

    <style type="text/tailwindcss">
        @layer utilities {
      .glass-card {
        @apply bg-dark-light/50 backdrop-blur-md border border-white/10 rounded-xl shadow-glass;
        transition: all 0.3s ease;
      }
      .glass-card:hover {
        @apply shadow-glow-primary border-primary/30;
      }
      .glass-card-active {
        @apply shadow-glow-primary border-primary/50;
      }
      .glass-overlay {
        @apply absolute inset-0 rounded-xl pointer-events-none;
        background: linear-gradient(120deg, rgba(255,255,255,0.08) 11%, rgba(255,255,255,0.03) 44%, rgba(255,255,255,0.12) 100%);
        mix-blend-mode: lighten;
        z-index: 0;
      }
      .btn-primary {
        @apply bg-gradient-to-r from-primary to-primary-dark text-white font-medium rounded-lg px-4 py-2 shadow-md hover:shadow-glow-primary transition-all duration-300 hover:scale-[1.02];
      }
      .btn-secondary {
        @apply bg-dark-light/70 text-white font-medium rounded-lg px-4 py-2 border border-white/10 shadow-md hover:shadow-glow-secondary transition-all duration-300 hover:scale-[1.02];
      }
      .value-positive {
        @apply text-success;
        text-shadow: 0 0 6px rgba(16, 185, 129, 0.3);
      }
      .value-negative {
        @apply text-danger;
        text-shadow: 0 0 6px rgba(239, 68, 68, 0.3);
      }
      .animate-pulse-slow {
        animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }
      .tooltip {
        @apply invisible absolute z-50 bg-dark-light/90 backdrop-blur-md border border-white/10 rounded-lg px-3 py-2 text-sm text-white shadow-lg;
      }
      .has-tooltip:hover .tooltip {
        @apply visible;
      }
      .nav-link {
        @apply text-white/70 hover:text-white transition-colors duration-200 font-medium px-3 py-2 rounded-lg hover:bg-white/5;
      }
      .nav-link.active {
        @apply text-white bg-white/10;
      }
      .alert-pulse {
        animation: alertPulse 2s ease-in-out infinite alternate;
      }
      .page {
        @apply hidden;
      }
      .page.active {
        @apply block;
      }
      .notification {
        @apply fixed bottom-4 right-4 bg-dark-light/90 backdrop-blur-md border border-white/10 rounded-lg px-4 py-3 shadow-lg z-50 transform transition-all duration-300 ease-in-out;
      }
      .mobile-menu {
        @apply fixed inset-0 bg-dark-light/95 backdrop-blur-md z-40 flex flex-col items-center justify-center space-y-6 transition-all duration-300 ease-in-out transform translate-x-full;
      }
      .mobile-menu.open {
        @apply translate-x-0;
      }
      @keyframes alertPulse {
        0% { box-shadow: 0 0 10px 2px rgba(239, 68, 68, 0.3); }
        100% { box-shadow: 0 0 18px 6px rgba(239, 68, 68, 0.7); }
      }


      body {
         overflow-x: hidden;
            width: 100%;
        }

        .container {
            width: 100%;
            max-width: 100%;
            padding-left: 1rem;
            padding-right: 1rem;
        }

        .mobile-menu {
    width: 100%;
    left: 0;
    right: 0;
}
    }
  </style>
</head>

<body class="bg-dark font-sans text-white min-h-screen flex flex-col">
    <!-- Header -->
    <header class="bg-dark-light/50 backdrop-blur-md border-b border-white/10 sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-8">
                <h1
                    class="text-2xl font-bold bg-gradient-to-r from-primary to-primary-light bg-clip-text text-transparent">
                    FinDash
                </h1>
                <nav class="hidden md:flex space-x-1">
                    <a href="#" class="nav-link active" data-page="dashboard">Dashboard</a>
                    <a href="#" class="nav-link" data-page="portfolio">Portfolio</a>
                    <a href="#" class="nav-link" data-page="settings">Settings</a>
                </nav>
            </div>
            <div class="flex items-center space-x-4">
                <!-- Mobile menu button -->
                <button id="mobile-menu-button" class="md:hidden text-white/70 hover:text-white">
                    <i class="fas fa-bars text-xl"></i>
                </button>
                <a href="#" id="user-settings" class="relative has-tooltip">
                    <div
                        class="w-10 h-10 rounded-full bg-gradient-to-r from-primary to-primary-dark flex items-center justify-center cursor-pointer">
                        <span class="font-medium">JD</span>
                    </div>
                    <div class="tooltip -bottom-12 left-1/2 transform -translate-x-1/2 w-32 text-center">
                        Settings
                    </div>
                </a>
            </div>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="mobile-menu">
        <button id="close-mobile-menu" class="absolute top-4 right-4 text-white/70 hover:text-white">
            <i class="fas fa-times text-xl"></i>
        </button>
        <a href="#" class="nav-link active text-xl" data-page="dashboard">Dashboard</a>
        <a href="#" class="nav-link text-xl" data-page="portfolio">Portfolio</a>
        <a href="#" class="nav-link text-xl" data-page="settings">Settings</a>
    </div>

    <!-- Dashboard Page -->
    <main id="dashboard-page" class="page active flex-grow container mx-auto px-4 py-6">
        <div class="flex flex-col gap-6">
            <!-- Portfolio Summary -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Total Value Card -->
                <div class="glass-card p-6 lg:col-span-2 relative overflow-hidden">
                    <div class="glass-overlay"></div>
                    <div class="relative z-10">
                        <div class="flex justify-between items-start">
                            <div>
                                <h2 class="text-lg font-semibold text-primary-light mb-1">Portfolio Value</h2>
                                <div class="flex items-baseline space-x-2">
                                    <span class="text-4xl font-bold" id="portfolio-total">$--.--</span>
                                    <span class="text-lg" id="portfolio-delta"></span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4">
                            <canvas id="valueChart" height="120"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="glass-card p-6 relative">
                    <div class="glass-overlay"></div>
                    <div class="relative z-10">
                        <h2 class="text-lg font-semibold text-primary-light mb-4">Quick Stats</h2>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between text-sm text-white/70 mb-1">
                                    <span>24h Change</span>
                                    <span id="daily-change">--.--%</span>
                                </div>
                                <div class="w-full bg-dark-light rounded-full h-2">
                                    <div id="daily-change-bar" class="bg-primary h-2 rounded-full" style="width: 50%">
                                    </div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-sm text-white/70 mb-1">
                                    <span>Allocation Diversity</span>
                                    <span id="diversity-score">--/10</span>
                                </div>
                                <div class="w-full bg-dark-light rounded-full h-2">
                                    <div id="diversity-bar" class="bg-secondary h-2 rounded-full" style="width: 70%">
                                    </div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-sm text-white/70 mb-1">
                                    <span>Risk Level</span>
                                    <span id="risk-level">Medium</span>
                                </div>
                                <div class="w-full bg-dark-light rounded-full h-2">
                                    <div id="risk-bar" class="bg-warning h-2 rounded-full" style="width: 60%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Asset Table -->
                <div class="glass-card p-6 lg:col-span-2 relative overflow-hidden">
                    <div class="glass-overlay"></div>
                    <div class="relative z-10">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-lg font-semibold text-primary-light">Assets Breakdown</h2>
                            <button id="export-portfolio" class="btn-secondary text-sm px-3 py-1">
                                <i class="fas fa-file-export mr-1"></i>
                                <span>Export</span>
                            </button>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full" id="asset-table">
                                <thead>
                                    <tr class="text-left text-sm text-white/70 border-b border-white/10">
                                        <th class="pb-3 pl-2">Asset</th>
                                        <th class="pb-3">Type</th>
                                        <th class="pb-3">Amount</th>
                                        <th class="pb-3">Price</th>
                                        <th class="pb-3">Value</th>
                                        <th class="pb-3 pr-2">Δ%</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-white/5">
                                    <!-- JS populates here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="glass-card p-6 relative">
                    <div class="glass-overlay"></div>
                    <div class="relative z-10">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-lg font-semibold text-primary-light">Portfolio Allocation</h2>
                        </div>
                        <div class="h-64">
                            <canvas id="pieChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Alerts Section -->
            <div class="glass-card p-6 relative">
                <div class="glass-overlay"></div>
                <div class="relative z-10">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-lg font-semibold text-primary-light">Portfolio Alerts</h2>
                        <button id="show-alert-modal"
                            class="btn-secondary text-sm px-3 py-1 flex items-center space-x-1">
                            <i class="fas fa-plus"></i>
                            <span>New Alert</span>
                        </button>
                    </div>

                    <div id="alerts" class="space-y-2">
                        <!-- Alerts populated here by JS -->
                    </div>

                    <div class="mt-4 text-sm text-white/70">
                        Example: <span class="text-primary">BTC Above $45000</span> or <span class="text-primary">AAPL %
                            Change -2</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Portfolio Page -->
    <main id="portfolio-page" class="page flex-grow container mx-auto px-4 py-6">
        <div class="flex flex-col gap-6">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Pie Chart -->
                <div class="glass-card p-6 relative">
                    <div class="glass-overlay"></div>
                    <div class="relative z-10">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-lg font-semibold text-primary-light">Your Allocation</h2>
                        </div>
                        <div class="h-64">
                            <canvas id="portfolioPieChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Buy/Sell Panel -->
                <div class="glass-card p-6 lg:col-span-2 relative overflow-hidden">
                    <div class="glass-overlay"></div>
                    <div class="relative z-10">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-lg font-semibold text-primary-light">Trade Assets</h2>
                            <div class="relative w-64">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-search text-white/50"></i>
                                </div>
                                <input type="text" id="asset-search"
                                    class="w-full bg-dark-light/70 border border-white/10 rounded-lg pl-10 pr-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                    placeholder="Search assets...">
                            </div>
                        </div>

                        <div class="overflow-x-auto">
                            <table class="w-full" id="trade-asset-table">
                                <thead>
                                    <tr class="text-left text-sm text-white/70 border-b border-white/10">
                                        <th class="pb-3 pl-2">Asset</th>
                                        <th class="pb-3">Price</th>
                                        <th class="pb-3">24h Δ</th>
                                        <th class="pb-3">Amount</th>
                                        <th class="pb-3 pr-2">Action</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-white/5" id="trade-asset-body">
                                    <!-- JS populates here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Transaction History -->
            <div class="glass-card p-6 relative">
                <div class="glass-overlay"></div>
                <div class="relative z-10">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-lg font-semibold text-primary-light">Transaction History</h2>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="w-full" id="transaction-table">
                            <thead>
                                <tr class="text-left text-sm text-white/70 border-b border-white/10">
                                    <th class="pb-3 pl-2">Date</th>
                                    <th class="pb-3">Asset</th>
                                    <th class="pb-3">Type</th>
                                    <th class="pb-3">Amount</th>
                                    <th class="pb-3">Price</th>
                                    <th class="pb-3">Total</th>
                                    <th class="pb-3 pr-2">Status</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-white/5" id="transaction-body">
                                <!-- JS populates here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Settings Page -->
    <main id="settings-page" class="page flex-grow container mx-auto px-4 py-6">
        <div class="flex flex-col gap-6">
            <div class="glass-card p-6 relative">
                <div class="glass-overlay"></div>
                <div class="relative z-10">
                    <h2 class="text-2xl font-semibold text-primary-light mb-6">Account Settings</h2>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Profile Settings -->
                        <div>
                            <h3 class="text-lg font-semibold text-primary-light mb-4 border-b border-white/10 pb-2">
                                Profile</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-white/70 mb-1">Name</label>
                                    <input type="text"
                                        class="w-full bg-dark-light/70 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                        value="John Doe">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-white/70 mb-1">Email</label>
                                    <input type="email"
                                        class="w-full bg-dark-light/70 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                        value="john@example.com">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-white/70 mb-1">Phone</label>
                                    <input type="tel"
                                        class="w-full bg-dark-light/70 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                        value="+1 (555) 123-4567">
                                </div>
                                <button id="update-profile-btn" class="btn-primary w-full mt-4">
                                    Update Profile
                                </button>
                            </div>
                        </div>

                        <!-- Security Settings -->
                        <div>
                            <h3 class="text-lg font-semibold text-primary-light mb-4 border-b border-white/10 pb-2">
                                Security</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-white/70 mb-1">Current Password</label>
                                    <input type="password"
                                        class="w-full bg-dark-light/70 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                        placeholder="••••••••">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-white/70 mb-1">New Password</label>
                                    <input type="password"
                                        class="w-full bg-dark-light/70 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                        placeholder="••••••••">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-white/70 mb-1">Confirm Password</label>
                                    <input type="password"
                                        class="w-full bg-dark-light/70 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                        placeholder="••••••••">
                                </div>
                                <button id="change-password-btn" class="btn-primary w-full mt-4">
                                    Change Password
                                </button>
                            </div>
                        </div>

                        <!-- Notification Settings -->
                        <div>
                            <h3 class="text-lg font-semibold text-primary-light mb-4 border-b border-white/10 pb-2">
                                Notifications</h3>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <label class="block text-sm font-medium text-white/70">Email
                                            Notifications</label>
                                        <p class="text-xs text-white/50">Receive important updates via email</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" checked class="sr-only peer">
                                        <div
                                            class="w-11 h-6 bg-gray-700 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                        </div>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div>
                                        <label class="block text-sm font-medium text-white/70">SMS Notifications</label>
                                        <p class="text-xs text-white/50">Receive alerts via text message</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer">
                                        <div
                                            class="w-11 h-6 bg-gray-700 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                        </div>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div>
                                        <label class="block text-sm font-medium text-white/70">Price Alerts</label>
                                        <p class="text-xs text-white/50">Get notified when assets hit targets</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" checked class="sr-only peer">
                                        <div
                                            class="w-11 h-6 bg-gray-700 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- App Preferences -->
                        <div>
                            <h3 class="text-lg font-semibold text-primary-light mb-4 border-b border-white/10 pb-2">
                                Preferences</h3>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-white/70 mb-1">Default View</label>
                                    <select
                                        class="w-full bg-dark-light/70 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                                        <option>Dashboard</option>
                                        <option>Portfolio</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-white/70 mb-1">Currency</label>
                                    <select
                                        class="w-full bg-dark-light/70 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                                        <option>USD ($)</option>
                                        <option>EUR (€)</option>
                                        <option>GBP (£)</option>
                                        <option>JPY (¥)</option>
                                    </select>
                                </div>
                                <button id="save-preferences-btn" class="btn-primary w-full mt-4">
                                    Save Preferences
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-dark-light/50 backdrop-blur-md border-t border-white/10 py-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-lg font-semibold text-primary-light mb-4">FinDash</h3>
                    <p class="text-sm text-white/70">Your all-in-one financial dashboard for tracking investments and
                        managing your portfolio.</p>
                    <div class="flex space-x-4 mt-4">
                        <a href="#" class="text-white/50 hover:text-primary transition-colors">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="text-white/50 hover:text-primary transition-colors">
                            <i class="fab fa-facebook"></i>
                        </a>
                        <a href="#" class="text-white/50 hover:text-primary transition-colors">
                            <i class="fab fa-linkedin"></i>
                        </a>
                        <a href="#" class="text-white/50 hover:text-primary transition-colors">
                            <i class="fab fa-github"></i>
                        </a>
                    </div>
                </div>
                <div>
                    <h4 class="text-sm font-semibold text-white uppercase tracking-wider mb-4">Resources</h4>
                    <ul class="space-y-2">
                        <li><a href="#"
                                class="text-sm text-white/70 hover:text-primary transition-colors">Documentation</a>
                        </li>
                        <li><a href="#" class="text-sm text-white/70 hover:text-primary transition-colors">API
                                Reference</a></li>
                        <li><a href="#" class="text-sm text-white/70 hover:text-primary transition-colors">Tutorials</a>
                        </li>
                        <li><a href="#" class="text-sm text-white/70 hover:text-primary transition-colors">Blog</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-sm font-semibold text-white uppercase tracking-wider mb-4">Company</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-sm text-white/70 hover:text-primary transition-colors">About Us</a>
                        </li>
                        <li><a href="#" class="text-sm text-white/70 hover:text-primary transition-colors">Careers</a>
                        </li>
                        <li><a href="#" class="text-sm text-white/70 hover:text-primary transition-colors">Privacy
                                Policy</a></li>
                        <li><a href="#" class="text-sm text-white/70 hover:text-primary transition-colors">Terms of
                                Service</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-sm font-semibold text-white uppercase tracking-wider mb-4">Newsletter</h4>
                    <p class="text-sm text-white/70 mb-3">Subscribe to our newsletter for the latest updates.</p>
                    <div class="flex">
                        <input type="email" placeholder="Your email"
                            class="bg-dark-light/70 border border-white/10 rounded-l-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent w-full">
                        <button id="email-subscribe-btn"
                            class="bg-primary hover:bg-primary-dark text-white font-medium rounded-r-lg px-4 py-2">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div class="border-t border-white/10 mt-8 pt-6 flex flex-col md:flex-row justify-between items-center">
                <p class="text-sm text-white/50">© 2025 FinDash. All rights reserved.</p>
                <div class="flex space-x-6 mt-4 md:mt-0">
                    <a href="#" class="text-sm text-white/50 hover:text-primary transition-colors">Privacy Policy</a>
                    <a href="#" class="text-sm text-white/50 hover:text-primary transition-colors">Terms of Service</a>
                    <a href="#" class="text-sm text-white/50 hover:text-primary transition-colors">Cookies</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Alert Modal -->
    <div id="alert-modal"
        class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 hidden">
        <div class="glass-card p-6 w-full max-w-md relative">
            <div class="glass-overlay"></div>
            <div class="relative z-10">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">Create New Alert</h3>
                    <button id="close-alert-modal" class="text-white/50 hover:text-white transition-colors">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <form id="alert-config" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-white/70 mb-1">Asset</label>
                        <select id="alert-asset"
                            class="w-full bg-dark-light/70 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                            <!-- Options will be populated by JS -->
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-white/70 mb-1">Alert Type</label>
                        <select id="alert-type"
                            class="w-full bg-dark-light/70 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                            <option value="above">Price Above</option>
                            <option value="below">Price Below</option>
                            <option value="change">% Change</option>
                        </select>
                    </div>

                    <div>
                        <label id="alert-value-label" class="block text-sm font-medium text-white/70 mb-1">Value</label>
                        <input type="number" id="alert-value" step="any" required
                            class="w-full bg-dark-light/70 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                            placeholder="1000">
                    </div>

                    <div class="pt-2">
                        <button type="submit" class="btn-primary w-full">
                            Create Alert
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Trade Modal -->
    <div id="trade-modal"
        class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 hidden">
        <div class="glass-card p-6 w-full max-w-md relative">
            <div class="glass-overlay"></div>
            <div class="relative z-10">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold" id="trade-modal-title">Trade Asset</h3>
                    <button id="close-trade-modal" class="text-white/50 hover:text-white transition-colors">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <form id="trade-form" class="space-y-4">
                    <input type="hidden" id="trade-asset-symbol">
                    <input type="hidden" id="trade-asset-price">
                    <input type="hidden" id="trade-type">

                    <div class="flex justify-between items-center">
                        <span class="text-sm font-medium text-white/70">Current Price:</span>
                        <span class="font-medium" id="trade-current-price">$--.--</span>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-white/70 mb-1">Amount</label>
                        <input type="number" id="trade-amount" step="any" required
                            class="w-full bg-dark-light/70 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                            placeholder="0.00">
                    </div>

                    <div class="flex justify-between items-center">
                        <span class="text-sm font-medium text-white/70">Total:</span>
                        <span class="font-medium" id="trade-total">$--.--</span>
                    </div>

                    <div class="pt-2">
                        <button type="submit" class="btn-primary w-full" id="trade-submit-btn">
                            Confirm Trade
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Notification Element -->
    <div id="notification" class="notification hidden">
        <div class="flex items-center space-x-3">
            <i class="fas fa-check-circle text-success"></i>
            <span id="notification-message">Notification message here</span>
        </div>
    </div>

    <script>
        // Mock Portfolio Data
        const ASSETS = [
            {
                symbol: "BTC",
                name: "Bitcoin",
                type: "Crypto",
                amount: 0.5,
                price: 43000,
                lastPrice: 43000,
                color: "#F7931A"
            },
            {
                symbol: "AAPL",
                name: "Apple Inc.",
                type: "Stock",
                amount: 12,
                price: 185.25,
                lastPrice: 185.25,
                color: "#4F8CFF"
            },
            {
                symbol: "ETH",
                name: "Ethereum",
                type: "Crypto",
                amount: 3,
                price: 2450,
                lastPrice: 2450,
                color: "#627EEA"
            },
            {
                symbol: "TSLA",
                name: "Tesla",
                type: "Stock",
                amount: 6,
                price: 780.50,
                lastPrice: 780.50,
                color: "#fa253b"
            },
            {
                symbol: "VTI",
                name: "Vanguard Total Stock ETF",
                type: "ETF",
                amount: 8,
                price: 220,
                lastPrice: 220,
                color: "#0cba7c"
            },
            {
                symbol: "MSFT",
                name: "Microsoft",
                type: "Stock",
                amount: 0,
                price: 330.25,
                lastPrice: 330.25,
                color: "#7FBA00"
            },
            {
                symbol: "GOOGL",
                name: "Alphabet Inc.",
                type: "Stock",
                amount: 0,
                price: 135.75,
                lastPrice: 135.75,
                color: "#4285F4"
            },
            {
                symbol: "AMZN",
                name: "Amazon",
                type: "Stock",
                amount: 0,
                price: 125.80,
                lastPrice: 125.80,
                color: "#FF9900"
            }
        ];

        // Sample Transaction history
        const TRANSACTIONS = [
            {
                date: new Date('2023-05-10'),
                symbol: "BTC",
                type: "buy",
                amount: 0.5,
                price: 42000,
                status: "completed"
            },
            {
                date: new Date('2023-05-12'),
                symbol: "AAPL",
                type: "buy",
                amount: 12,
                price: 180.50,
                status: "completed"
            },
            {
                date: new Date('2023-05-15'),
                symbol: "ETH",
                type: "buy",
                amount: 3,
                price: 2400,
                status: "completed"
            }
        ];

        const assetColors = {};
        ASSETS.forEach(a => assetColors[a.symbol] = a.color);

        let assetHistory = [];
        const HISTORY_LENGTH = 30;

        let alerts = [];
        let triggeredAlerts = [];

        let pieChart, valueChart, portfolioPieChart;

        function currency(v) {
            return '$' + v.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        }
        function percent(p, dec = 2) {
            return (p > 0 ? "+" : "") + p.toFixed(dec) + "%";
        }
        function getTotalValue(assets = ASSETS) {
            return assets.reduce((sum, a) => sum + a.amount * a.price, 0);
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            const messageEl = document.getElementById('notification-message');

            messageEl.textContent = message;
            notification.classList.remove('hidden');

            setTimeout(() => {
                notification.classList.add('animate__animated', 'animate__fadeInUp');
            }, 10);

            setTimeout(() => {
                notification.classList.remove('animate__fadeInUp');
                notification.classList.add('animate__fadeOutDown');

                setTimeout(() => {
                    notification.classList.add('hidden');
                    notification.classList.remove('animate__fadeOutDown');
                }, 500);
            }, 3000);
        }

        // Portfolio Update Simulation
        function simulatePriceUpdate() {
            // Simulate small price movements
            ASSETS.forEach(asset => {
                asset.lastPrice = asset.price;
                let drift = 0;
                if (asset.type === "Crypto") {
                    drift = (Math.random() - 0.5) * 0.85; // up to +/-0.85%
                } else if (asset.type === "ETF") {
                    drift = (Math.random() - 0.5) * 0.19;
                } else {
                    drift = (Math.random() - 0.5) * 0.45;
                }
                let pct = drift / 100;
                asset.price = Math.max(0.01, asset.price * (1 + pct));
            });
        }
        function addHistoryPoint() {
            const now = new Date();
            const total = getTotalValue();
            assetHistory.push({ time: now, total });
            if (assetHistory.length > HISTORY_LENGTH) assetHistory.shift();
        }
        function get24hDelta() {
            if (assetHistory.length < 2) return 0;
            const cur = assetHistory[assetHistory.length - 1].total;
            const first = assetHistory[0].total;
            return ((cur - first) / first) * 100;
        }

        function updateTotalValue() {
            const total = getTotalValue();
            document.getElementById('portfolio-total').textContent = currency(total);
            document.getElementById('portfolio-delta').innerHTML = deltaSpan(get24hDelta());

            const delta = get24hDelta();
            document.getElementById('daily-change').innerHTML = deltaSpan(delta).replace('$', '');
            document.getElementById('daily-change-bar').style.width = `${Math.min(100, Math.max(0, 50 + delta * 2))}%`;
        }
        function deltaSpan(pct) {
            if (!Number.isFinite(pct)) return '';
            let cls = '', prefix = '', sign = '';
            if (pct > 0.01) { cls = 'value-positive'; prefix = '▲'; sign = '+'; }
            else if (pct < -0.01) { cls = 'value-negative'; prefix = '▼'; }
            else { cls = ''; prefix = ''; sign = ''; }
            return `<span class="${cls}">${prefix} ${sign}${pct.toFixed(2)}%</span>`;
        }
        function updateAssetTable() {
            const tbody = document.querySelector("#asset-table tbody");
            tbody.innerHTML = "";
            ASSETS.filter(a => a.amount > 0).forEach(asset => {
                const value = asset.amount * asset.price;
                const prevValue = asset.amount * asset.lastPrice;
                const change = ((asset.price - asset.lastPrice) / asset.lastPrice) * 100;
                const changeClass = change > 0.01 ? 'value-positive' : (change < -0.01 ? 'value-negative' : '');

                const row = document.createElement('tr');
                row.className = 'hover:bg-white/5 transition-colors cursor-pointer';
                row.innerHTML = `
      <td class="pl-2 py-3">
        <div class="flex items-center space-x-2">
          <div class="w-6 h-6 rounded-full flex items-center justify-center" style="background-color: ${asset.color}">
            <span class="text-xs font-medium text-white">${asset.symbol[0]}</span>
          </div>
          <span class="font-medium" style="color: ${asset.color}">${asset.symbol}</span>
        </div>
      </td>
      <td class="py-3 text-white/80">${asset.type}</td>
      <td class="py-3">${asset.amount}</td>
      <td class="py-3">${currency(asset.price)}</td>
      <td class="py-3 font-medium">${currency(value)}</td>
      <td class="pr-2 py-3 ${changeClass}">${percent(change, 2)}</td>
    `;
                tbody.appendChild(row);
            });
        }

        function updatePieChart() {
            const labels = ASSETS.filter(a => a.amount > 0).map(a => a.symbol);
            const values = ASSETS.filter(a => a.amount > 0).map(a => a.amount * a.price);
            const bgs = ASSETS.filter(a => a.amount > 0).map(a => a.color);

            if (!pieChart) {
                pieChart = new Chart(document.getElementById('pieChart').getContext('2d'), {
                    type: 'doughnut',
                    data: {
                        labels, datasets: [{
                            data: values,
                            backgroundColor: bgs,
                            borderColor: "rgba(255,255,255,0.12)",
                            borderWidth: 2,
                            hoverOffset: 14,
                        }]
                    },
                    options: {
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    color: "#fff",
                                    font: { size: 12, family: 'Open Sans' },
                                    boxWidth: 12,
                                    padding: 16,
                                    usePointStyle: true,
                                }
                            },
                            tooltip: {
                                backgroundColor: 'rgba(2, 6, 23, 0.9)',
                                borderColor: 'rgba(255, 255, 255, 0.1)',
                                borderWidth: 1,
                                bodyColor: '#fff',
                                titleColor: '#6ee7b7',
                                padding: 12,
                                callbacks: {
                                    label: ctx => `${ctx.label}: ${currency(ctx.parsed)} (${((ctx.parsed / getTotalValue()) * 100).toFixed(1)}%)`
                                }
                            }
                        },
                        cutout: '70%',
                        responsive: true,
                        maintainAspectRatio: false,
                        animation: { duration: 600, easing: 'easeOutQuart' }
                    }
                });
            } else {
                pieChart.data.labels = labels;
                pieChart.data.datasets[0].data = values;
                pieChart.update();
            }
        }

        function updatePortfolioPieChart() {
            const labels = ASSETS.filter(a => a.amount > 0).map(a => a.symbol);
            const values = ASSETS.filter(a => a.amount > 0).map(a => a.amount * a.price);
            const bgs = ASSETS.filter(a => a.amount > 0).map(a => a.color);

            if (!portfolioPieChart) {
                portfolioPieChart = new Chart(document.getElementById('portfolioPieChart').getContext('2d'), {
                    type: 'doughnut',
                    data: {
                        labels, datasets: [{
                            data: values,
                            backgroundColor: bgs,
                            borderColor: "rgba(255,255,255,0.12)",
                            borderWidth: 2,
                            hoverOffset: 14,
                        }]
                    },
                    options: {
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    color: "#fff",
                                    font: { size: 12, family: 'Open Sans' },
                                    boxWidth: 12,
                                    padding: 16,
                                    usePointStyle: true,
                                }
                            },
                            tooltip: {
                                backgroundColor: 'rgba(2, 6, 23, 0.9)',
                                borderColor: 'rgba(255, 255, 255, 0.1)',
                                borderWidth: 1,
                                bodyColor: '#fff',
                                titleColor: '#6ee7b7',
                                padding: 12,
                                callbacks: {
                                    label: ctx => `${ctx.label}: ${currency(ctx.parsed)} (${((ctx.parsed / getTotalValue()) * 100).toFixed(1)}%)`
                                }
                            }
                        },
                        cutout: '70%',
                        responsive: true,
                        maintainAspectRatio: false,
                        animation: { duration: 600, easing: 'easeOutQuart' }
                    }
                });
            } else {
                portfolioPieChart.data.labels = labels;
                portfolioPieChart.data.datasets[0].data = values;
                portfolioPieChart.update();
            }
        }

        function updateValueChart() {
            if (!valueChart) {
                const ctx = document.getElementById('valueChart').getContext('2d');
                valueChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: assetHistory.map(p => formatTime(p.time)),
                        datasets: [{
                            label: 'Portfolio Value',
                            data: assetHistory.map(p => p.total),
                            borderColor: "#06b6d4",
                            backgroundColor: "rgba(6, 182, 212, 0.05)",
                            borderWidth: 2,
                            fill: true,
                            tension: 0.3,
                            pointRadius: 0,
                            pointHoverRadius: 5,
                            pointBackgroundColor: "#10b981",
                            pointBorderColor: "#fff",
                            pointBorderWidth: 2,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                grid: { display: false, drawBorder: false },
                                ticks: {
                                    color: "#a6b3cf",
                                    maxTicksLimit: 6,
                                    autoSkip: true
                                }
                            },
                            y: {
                                grid: { color: "rgba(255,255,255,0.05)", drawBorder: false },
                                ticks: {
                                    color: "#a6b3cf",
                                    callback: value => '$' + (value / 1000).toFixed(1) + 'K'
                                }
                            }
                        },
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                backgroundColor: 'rgba(2, 6, 23, 0.9)',
                                borderColor: 'rgba(255, 255, 255, 0.1)',
                                borderWidth: 1,
                                bodyColor: '#fff',
                                titleColor: '#6ee7b7',
                                padding: 12,
                                callbacks: {
                                    label: ctx => currency(ctx.parsed.y)
                                }
                            }
                        },
                        interaction: {
                            intersect: false,
                            mode: 'index'
                        },
                        animation: { duration: 400 }
                    }
                });
            } else {
                valueChart.data.labels = assetHistory.map(p => formatTime(p.time));
                valueChart.data.datasets[0].data = assetHistory.map(p => p.total);
                valueChart.update();
            }
        }

        function updateTradeAssetsTable() {
            const tbody = document.getElementById('trade-asset-body');
            tbody.innerHTML = "";

            ASSETS.forEach(asset => {
                const change = ((asset.price - asset.lastPrice) / asset.lastPrice) * 100;
                const changeClass = change > 0.01 ? 'value-positive' : (change < -0.01 ? 'value-negative' : '');

                const row = document.createElement('tr');
                row.className = 'hover:bg-white/5 transition-colors';
                row.innerHTML = `
      <td class="pl-2 py-3">
        <div class="flex items-center space-x-2">
          <div class="w-6 h-6 rounded-full flex items-center justify-center" style="background-color: ${asset.color}">
            <span class="text-xs font-medium text-white">${asset.symbol[0]}</span>
          </div>
          <div>
            <span class="font-medium" style="color: ${asset.color}">${asset.symbol}</span>
            <div class="text-xs text-white/50">${asset.name}</div>
          </div>
        </div>
      </td>
      <td class="py-3">${currency(asset.price)}</td>
      <td class="py-3 ${changeClass}">${percent(change, 2)}</td>
      <td class="py-3">
        <input type="number" value="${asset.amount}" class="w-20 bg-dark-light/70 border border-white/10 rounded-lg px-2 py-1 text-white focus:outline-none focus:ring-1 focus:ring-primary" disabled>
      </td>
      <td class="pr-2 py-3">
        <div class="flex space-x-2">
          <button class="trade-buy-btn bg-primary/10 text-primary hover:bg-primary/20 px-3 py-1 rounded-lg text-sm" data-symbol="${asset.symbol}" data-price="${asset.price}">
            Buy
          </button>
          <button class="trade-sell-btn ${asset.amount > 0 ? 'bg-danger/10 text-danger hover:bg-danger/20' : 'bg-gray-700 text-gray-500 cursor-not-allowed'} px-3 py-1 rounded-lg text-sm" data-symbol="${asset.symbol}" data-price="${asset.price}" ${asset.amount > 0 ? '' : 'disabled'}>
            Sell
          </button>
        </div>
      </td>
    `;
                tbody.appendChild(row);
            });

            document.querySelectorAll('.trade-buy-btn').forEach(btn => {
                btn.addEventListener('click', () => openTradeModal(btn.dataset.symbol, btn.dataset.price, 'buy'));
            });

            document.querySelectorAll('.trade-sell-btn').forEach(btn => {
                if (!btn.disabled) {
                    btn.addEventListener('click', () => openTradeModal(btn.dataset.symbol, btn.dataset.price, 'sell'));
                }
            });
        }

        function updateTransactionHistory() {
            const tbody = document.getElementById('transaction-body');
            tbody.innerHTML = "";

            // Sort transactions by date (newest first)
            const sortedTransactions = [...TRANSACTIONS].sort((a, b) => b.date - a.date);

            sortedTransactions.forEach(tx => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-white/5 transition-colors';
                row.innerHTML = `
      <td class="pl-2 py-3 text-sm">${formatDate(tx.date)}</td>
      <td class="py-3">
        <div class="flex items-center space-x-2">
          <div class="w-6 h-6 rounded-full flex items-center justify-center" style="background-color: ${assetColors[tx.symbol] || '#3b82f6'}">
            <span class="text-xs font-medium text-white">${tx.symbol[0]}</span>
          </div>
          <span class="font-medium">${tx.symbol}</span>
        </div>
      </td>
      <td class="py-3">
        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${tx.type === 'buy' ? 'bg-primary/10 text-primary' : 'bg-danger/10 text-danger'}">
          ${tx.type === 'buy' ? 'Buy' : 'Sell'}
        </span>
      </td>
      <td class="py-3">${tx.amount}</td>
      <td class="py-3">${currency(tx.price)}</td>
      <td class="py-3 font-medium">${currency(tx.amount * tx.price)}</td>
      <td class="pr-2 py-3">
        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success/10 text-success">
          ${tx.status}
        </span>
      </td>
    `;
                tbody.appendChild(row);
            });
        }

        function formatDate(d) {
            if (!(d instanceof Date)) d = new Date(d);
            return d.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
        }

        function formatTime(d) {
            if (!(d instanceof Date)) d = new Date(d);
            let h = d.getHours(), m = d.getMinutes();
            return `${h.toString().padStart(2, 0)}:${m.toString().padStart(2, 0)}`;
        }

        function openTradeModal(symbol, price, type) {
            const modal = document.getElementById('trade-modal');
            const asset = ASSETS.find(a => a.symbol === symbol);

            document.getElementById('trade-modal-title').textContent = `${type === 'buy' ? 'Buy' : 'Sell'} ${symbol}`;
            document.getElementById('trade-asset-symbol').value = symbol;
            document.getElementById('trade-asset-price').value = price;
            document.getElementById('trade-type').value = type;
            document.getElementById('trade-current-price').textContent = currency(price);
            document.getElementById('trade-amount').value = '';
            document.getElementById('trade-total').textContent = '$0.00';
            document.getElementById('trade-submit-btn').textContent = type === 'buy' ? 'Buy' : 'Sell';
            document.getElementById('trade-submit-btn').className = type === 'buy' ?
                'btn-primary w-full' : 'bg-danger hover:bg-danger-dark text-white font-medium rounded-lg px-4 py-2 shadow-md hover:shadow-glow-danger transition-all duration-300 hover:scale-[1.02] w-full';

            document.getElementById('trade-amount').addEventListener('input', (e) => {
                const amount = parseFloat(e.target.value) || 0;
                document.getElementById('trade-total').textContent = currency(amount * price);
            });

            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function executeTrade(symbol, price, amount, type) {
            const asset = ASSETS.find(a => a.symbol === symbol);

            if (type === 'buy') {
                asset.amount += parseFloat(amount);
            } else {
                asset.amount -= parseFloat(amount);
                if (asset.amount < 0) asset.amount = 0;
            }

            TRANSACTIONS.push({
                date: new Date(),
                symbol,
                type,
                amount: parseFloat(amount),
                price: parseFloat(price),
                status: 'completed'
            });

            // Update all displays
            updateAssetTable();
            updatePieChart();
            updatePortfolioPieChart();
            updateTotalValue();
            updateTradeAssetsTable();
            updateTransactionHistory();
        }

        function exportPortfolio() {
            const headers = ['Asset', 'Type', 'Amount', 'Price', 'Value', '24h Change'];
            const data = ASSETS.filter(a => a.amount > 0).map(asset => {
                const change = ((asset.price - asset.lastPrice) / asset.lastPrice) * 100;
                return [
                    asset.symbol,
                    asset.type,
                    asset.amount,
                    currency(asset.price),
                    currency(asset.amount * asset.price),
                    percent(change, 2)
                ];
            });

            const total = getTotalValue();
            const totalChange = get24hDelta();
            data.push([
                'TOTAL', '', '', '',
                currency(total),
                percent(totalChange, 2)
            ]);
            let csv = headers.join(',') + '\n';
            data.forEach(row => {
                csv += row.join(',') + '\n';
            });

            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', `portfolio_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        // Alerts
        function checkAlerts() {
            let newTriggered = [];
            alerts.forEach((a, i) => {
                const asset = ASSETS.find(as => as.symbol === a.symbol);
                if (!asset) return;
                if (a.type === "above" && asset.price > a.value) {
                    if (!a.triggered) { a.triggered = true; newTriggered.push({ ...a, price: asset.price }); }
                } else if (a.type === "below" && asset.price < a.value) {
                    if (!a.triggered) { a.triggered = true; newTriggered.push({ ...a, price: asset.price }); }
                } else if (a.type === "change") {
                    // %change from last open (simulate)
                    let base = asset.lastPrice;
                    let pct = ((asset.price - base) / base) * 100;
                    if (Math.abs(pct) >= Math.abs(a.value) && ((a.value < 0 && pct < a.value) || (a.value > 0 && pct > a.value))) {
                        if (!a.triggered) { a.triggered = true; newTriggered.push({ ...a, price: asset.price, pct }); }
                    }
                } else {
                    a.triggered = false;
                }
            });
            triggeredAlerts = triggeredAlerts.concat(newTriggered);
            updateAlertsDisplay();
            // Remove old triggered (reset when price moves away)
            alerts.forEach(a => {
                const asset = ASSETS.find(as => as.symbol === a.symbol);
                if (!asset) return;
                if ((a.type === "above" && asset.price <= a.value) ||
                    (a.type === "below" && asset.price >= a.value) ||
                    (a.type === "change" && Math.abs(((asset.price - asset.lastPrice) / asset.lastPrice) * 100) < Math.abs(a.value))
                ) {
                    a.triggered = false;
                }
            });
        }

        // Alerts UI
        function updateAlertsDisplay() {
            const alertsDiv = document.getElementById('alerts');
            alertsDiv.innerHTML = "";

            // Show triggered alerts
            triggeredAlerts.slice(-6).forEach(a => {
                const alertDiv = document.createElement('div');
                alertDiv.className = 'flex items-center justify-between p-3 rounded-lg bg-danger/10 border border-danger/30 alert-pulse animate__animated animate__headShake';
                alertDiv.innerHTML = `
      <div class="flex items-center space-x-3">
        <div class="w-8 h-8 rounded-full bg-danger/20 flex items-center justify-center">
          <i class="fas fa-exclamation-triangle text-danger"></i>
        </div>
        <div>
          <span class="font-medium" style="color:${assetColors[a.symbol] || '#fff'}">${a.symbol}</span>
          ${a.type === 'above' ? "is above" : a.type === 'below' ? "is below" : "% change"}
          ${a.type === 'change' ? percent(a.pct, 2) : currency(a.price)} (threshold: ${a.type === 'change' ? percent(a.value, 2) : currency(a.value)})
        </div>
      </div>
      <button onclick="removeAlert(${alerts.indexOf(a)})" class="text-danger hover:text-danger/70 transition-colors" title="Remove Alert">
        <i class="fas fa-times"></i>
      </button>
    `;
                alertsDiv.appendChild(alertDiv);
            });

            // Show active (non-triggered) alerts
            alerts.forEach((a, i) => {
                if (a.triggered) return;
                const alertDiv = document.createElement('div');
                alertDiv.className = 'flex items-center justify-between p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-colors';
                alertDiv.innerHTML = `
      <div class="flex items-center space-x-3">
        <div class="w-8 h-8 rounded-full bg-success/10 flex items-center justify-center">
          <i class="fas fa-check-circle text-success"></i>
        </div>
        <div>
          <span class="font-medium" style="color:${assetColors[a.symbol] || '#fff'}">${a.symbol}</span>
          ${a.type === 'above' ? 'Above' : a.type === 'below' ? 'Below' : "% Change"}
          <span class="font-medium">${a.type === 'change' ? percent(a.value, 2) : currency(a.value)}</span>
        </div>
      </div>
      <button onclick="removeAlert(${i})" class="text-white/50 hover:text-white transition-colors" title="Remove Alert">
        <i class="fas fa-times"></i>
      </button>
    `;
                alertsDiv.appendChild(alertDiv);
            });

            if (alerts.length === 0 && triggeredAlerts.length === 0) {
                alertsDiv.innerHTML = `
      <div class="text-center py-8 text-white/50">
        <i class="fas fa-bell-slash text-3xl mb-3"></i>
        <p class="text-lg font-medium">No alerts set up</p>
        <p class="text-sm mt-1">Create alerts to get notified about price changes</p>
      </div>
    `;
            }
        }
        window.removeAlert = function (i) {
            alerts.splice(i, 1);
            triggeredAlerts = [];
            updateAlertsDisplay();
        }

        // Modals
        function setupModals() {
            // Alert modal
            const alertModal = document.getElementById('alert-modal');
            const showAlertBtn = document.getElementById('show-alert-modal');
            const closeAlertBtn = document.getElementById('close-alert-modal');

            showAlertBtn.addEventListener('click', () => {
                alertModal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            });

            closeAlertBtn.addEventListener('click', () => {
                alertModal.classList.add('hidden');
                document.body.style.overflow = '';
            });

            alertModal.addEventListener('click', (e) => {
                if (e.target === alertModal) {
                    alertModal.classList.add('hidden');
                    document.body.style.overflow = '';
                }
            });

            // Trade modal
            const tradeModal = document.getElementById('trade-modal');
            const closeTradeBtn = document.getElementById('close-trade-modal');

            closeTradeBtn.addEventListener('click', () => {
                tradeModal.classList.add('hidden');
                document.body.style.overflow = '';
            });

            tradeModal.addEventListener('click', (e) => {
                if (e.target === tradeModal) {
                    tradeModal.classList.add('hidden');
                    document.body.style.overflow = '';
                }
            });

            // Trade form submission
            document.getElementById('trade-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const symbol = document.getElementById('trade-asset-symbol').value;
                const price = document.getElementById('trade-asset-price').value;
                const amount = document.getElementById('trade-amount').value;
                const type = document.getElementById('trade-type').value;

                if (amount && parseFloat(amount) > 0) {
                    executeTrade(symbol, price, amount, type);
                    tradeModal.classList.add('hidden');
                    document.body.style.overflow = '';
                }
            });
        }

        // Alert Form
        function setupAlertForm() {
            // Populate asset selector
            const sel = document.getElementById('alert-asset');
            ASSETS.forEach(a => {
                const op = document.createElement('option');
                op.value = a.symbol;
                op.textContent = `${a.symbol} (${a.name})`;
                sel.appendChild(op);
            });

            // Change label for alert value
            document.getElementById('alert-type').addEventListener('change', function () {
                document.getElementById('alert-value-label').textContent =
                    this.value === "change" ? "% Change" : "Value";
                document.getElementById("alert-value").placeholder = this.value === "change" ? "±2" : "1000";
            });

            // Alert form submit
            document.getElementById('alert-config').addEventListener('submit', function (e) {
                e.preventDefault();
                const symbol = document.getElementById('alert-asset').value;
                const type = document.getElementById('alert-type').value;
                let value = parseFloat(document.getElementById('alert-value').value);
                if (isNaN(value)) return;

                // For %change, allow negative/positive
                alerts.push({ symbol, type, value, triggered: false });
                updateAlertsDisplay();

                // Close modal and reset form
                document.getElementById('alert-modal').classList.add('hidden');
                document.body.style.overflow = '';
                this.reset();
            });
        }

        // Navigation
        function setupNavigation() {
            // Page navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const page = link.dataset.page;

                    document.querySelectorAll('.nav-link').forEach(nav => {
                        nav.classList.remove('active');
                    });
                    link.classList.add('active');

                    document.querySelectorAll('.page').forEach(p => {
                        p.classList.remove('active');
                    });
                    document.getElementById(`${page}-page`).classList.add('active');
                });
            });

            document.getElementById('user-settings').addEventListener('click', (e) => {
                e.preventDefault();

                document.querySelectorAll('.nav-link').forEach(nav => {
                    nav.classList.remove('active');
                });
                document.querySelector('.nav-link[data-page="settings"]').classList.add('active');

                document.querySelectorAll('.page').forEach(p => {
                    p.classList.remove('active');
                });
                document.getElementById('settings-page').classList.add('active');
            });

            document.getElementById('export-portfolio').addEventListener('click', exportPortfolio);

            // Asset search
            document.getElementById('asset-search').addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                const rows = document.querySelectorAll('#trade-asset-body tr');

                rows.forEach(row => {
                    const symbol = row.querySelector('td:first-child span').textContent.toLowerCase();
                    if (symbol.includes(searchTerm)) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                });
            });

            // Mobile menu toggle
            document.getElementById('mobile-menu-button').addEventListener('click', () => {
                document.getElementById('mobile-menu').classList.add('open');
            });

            document.getElementById('close-mobile-menu').addEventListener('click', () => {
                document.getElementById('mobile-menu').classList.remove('open');
            });

            // Close mobile menu when clicking a link
            document.querySelectorAll('#mobile-menu .nav-link').forEach(link => {
                link.addEventListener('click', () => {
                    document.getElementById('mobile-menu').classList.remove('open');
                });
            });
        }

        function setupSettingsButtons() {
            document.getElementById('update-profile-btn').addEventListener('click', (e) => {
                e.preventDefault();
                showNotification('Profile Updated');
            });
            document.getElementById('change-password-btn').addEventListener('click', (e) => {
                e.preventDefault();
                showNotification('Password Changed');
            });
            document.getElementById('save-preferences-btn').addEventListener('click', (e) => {
                e.preventDefault();
                showNotification('Preferences Saved');
            });
            document.getElementById('email-subscribe-btn').addEventListener('click', (e) => {
                e.preventDefault();
                showNotification('Subscribed to Newsletter');
            });
        }

        // Main Update Loop
        function mainUpdate() {
            simulatePriceUpdate();
            addHistoryPoint();
            updateTotalValue();
            updatePieChart();
            updatePortfolioPieChart();
            updateValueChart();
            updateAssetTable();
            updateTradeAssetsTable();
            checkAlerts();
        }
        function initialHistory() {
            assetHistory = [];
            for (let i = HISTORY_LENGTH - 1; i >= 0; i--) {
                // Simulate "past" data
                simulatePriceUpdate();
                addHistoryPoint();
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initialHistory();
            updatePieChart();
            updatePortfolioPieChart();
            updateValueChart();
            updateTotalValue();
            updateAssetTable();
            updateTradeAssetsTable();
            updateTransactionHistory();
            updateAlertsDisplay();
            setupModals();
            setupAlertForm();
            setupNavigation();
            setupSettingsButtons();

            // Set quick stats
            document.getElementById('diversity-score').textContent = '7.8/10';
            document.getElementById('diversity-bar').style.width = '78%';
            document.getElementById('risk-level').textContent = 'Medium';
            document.getElementById('risk-bar').style.width = '60%';

            // Real time update
            setInterval(mainUpdate, 3000); // every 3s
        });

    </script>
</body>

</html>