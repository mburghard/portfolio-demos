<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mental Health Assistant</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.0.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.2.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        :root {
            --primary: #7C5DFA;
            --primary-light: #9277FF;
            --primary-dark: #5D45C6;
            --secondary: #29D0B2;
            --secondary-light: #54E5CC;
            --background: #F8FAFF;
            --card-bg: #FFFFFF;
            --text: #1A2138;
            --text-light: #6E7191;
            --border: #E4E7F4;
            --shadow: rgba(124, 93, 250, 0.1);
            --danger: #FF5C5C;
            --warning: #FF9F43;
            --info: #2D86FF;
        }

        /* Dark mode variables */
        .dark-mode {
            --primary: #9277FF;
            --primary-light: #A58EFF;
            --primary-dark: #7C5DFA;
            --secondary: #54E5CC;
            --secondary-light: #7FFFE6;
            --background: #141625;
            --card-bg: #1E2139;
            --text: #FFFFFF;
            --text-light: #D8D8D8;
            --border: #2B2D42;
            --shadow: rgba(0, 0, 0, 0.3);
            --danger: #FF7D7D;
            --warning: #FFB76B;
            --info: #5AA1FF;

            .card-header,
            .card-body,
            .history-item,
            .history-item-header,
            .history-date,
            .stats-label,
            .stats-value,
            .resource-title,
            .resource-description,
            .insight-title,
            .insight-card,
            .empty-state,
            .trend-indicator,
            .trend-neutral,
            .breathing-label,
            .breathing-timer,
            .breathing-instructions,
            .breathing-phase,
            .form-control,
            .form-select,
            .btn:not(.btn-primary),
            .mood-button span,
            .nav-button,
            .desktop-header-nav-button,
            .footer,
            .chat-message.assistant,
            .card-body h5,
            .card-body label,
            .form-label,
            .empty-state i,
            .ring-text {
                color: var(--text) !important;
            }

            .history-date,
            .stats-label,
            .resource-description,
            .empty-state,
            .trend-neutral,
            .mood-button span,
            .nav-button:not(.active):not(:hover),
            .desktop-header-nav-button:not(.active):not(:hover),
            .form-control::placeholder {
                color: var(--text-light) !important;
            }

            .breathing-label,
            .breathing-timer,
            .breathing-phase {
                color: var(--primary-light) !important;
            }

            .card-header,
            .history-item,
            .resource-card,
            .breathing-meter-container,
            .chat-message.assistant {
                border-color: var(--border) !important;
            }

            .mood-button,
            .breathing-meter-container {
                background-color: var(--card-bg) !important;
            }


        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background);
            color: var(--text);
            margin: 0;
            padding: 0;
            font-size: 15px;
            line-height: 1.6;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .theme-toggle {
            position: fixed;
            top: 15px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--card-bg);
            color: var(--text);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1100;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background-color: var(--primary);
            color: white;
            transform: scale(1.1);
        }

        .theme-toggle i {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .dark-mode .theme-toggle {
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .app-container {
            max-width: 100%;
            margin: 0 auto;
            background-color: var(--background);
            min-height: 100vh;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: var(--card-bg);
            color: var(--text);
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px var(--shadow);
        }

        .header-logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-circle {
            width: 38px;
            height: 38px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
        }

        .header h1 {
            margin: 0;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .desktop-nav {
            display: none;
        }

        .content {
            padding: 1.5rem;
            max-width: 1200px;
            margin: 0 auto;
            flex: 1;
        }

        .welcome-card {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            border-radius: 16px;
            padding: 2rem;
            color: white;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .welcome-card::after {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 300px;
            height: 300px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .welcome-card h2 {
            font-weight: 700;
            margin-bottom: 0.5rem;
            font-size: 1.6rem;
            position: relative;
            z-index: 1;
        }

        .welcome-card p {
            margin: 0;
            opacity: 0.9;
            font-weight: 400;
            position: relative;
            z-index: 1;
        }

        .card {
            border: none;
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 4px 20px var(--shadow);
            margin-bottom: 1.5rem;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px var(--shadow);
        }

        .card-header {
            background: none;
            border-bottom: 1px solid var(--border);
            padding: 1.25rem 1.5rem;
            font-weight: 600;
            font-size: 1rem;
            color: var(--text);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-header-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: rgba(124, 93, 250, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
        }

        .card-body {
            align-items: center;
            padding: 1.5rem;
        }

        .pie-chart {
            display: flex;
            justify-content: center;
        }

        .mood-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .mood-button {
            background: var(--background);
            border: 2px solid transparent;
            border-radius: 14px;
            padding: 1.25rem 1rem;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .mood-button span {
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text-light);
        }

        .mood-button:hover {
            background: rgba(124, 93, 250, 0.05);
            border-color: rgba(124, 93, 250, 0.2);
        }

        .mood-button.selected {
            background: rgba(124, 93, 250, 0.08);
            border-color: var(--primary);
            transform: scale(1.05);
        }

        .form-control,
        .form-select {
            border-radius: 12px;
            border: 1px solid var(--border);
            padding: 0.85rem 1rem;
            font-size: 0.95rem;
            background-color: var(--card-bg);
            color: var(--text);
            transition: all 0.3s ease;
        }

        .form-control:focus,
        .form-select:focus {
            box-shadow: 0 0 0 3px rgba(124, 93, 250, 0.2);
            border-color: var(--primary-light);
        }

        .btn {
            border-radius: 12px;
            padding: 12px 20px;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: var(--primary);
            border: none;
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(124, 93, 250, 0.3);
        }

        .btn-outline-primary {
            border: 2px solid var(--primary);
            color: var(--primary);
            background: transparent;
        }

        .btn-outline-primary:hover {
            background: rgba(124, 93, 250, 0.08);
            color: var(--primary-dark);
        }

        .history-container {
            max-height: 300px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .history-item {
            padding: 1rem;
            border-radius: 12px;
            background: var(--card-bg);
            margin-bottom: 0.75rem;
            border-left: 4px solid var(--primary);
            transition: background-color 0.3s ease;
        }

        .history-item-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
            font-weight: 500;
        }

        .history-date {
            font-size: 0.85rem;
            color: var(--text-light);
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--card-bg);
            display: flex;
            justify-content: space-around;
            padding: 0.75rem 0;
            border-top: 1px solid var(--border);
            box-shadow: 0 -4px 20px var(--shadow);
            z-index: 1000;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .nav-button {
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 1.1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 0;
            transition: all 0.2s ease;
            width: 20%;
            gap: 6px;
        }

        .nav-button span {
            font-size: 0.7rem;
            font-weight: 500;
        }

        .nav-button:hover,
        .nav-button.active {
            color: var(--primary);
        }

        .nav-button.active {
            position: relative;
        }

        .nav-button.active::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 40%;
            height: 4px;
            background: var(--primary);
            border-radius: 2px;
        }

        .stats-card {
            text-align: center;
            padding: 1.5rem;
        }

        .stats-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin: 0.5rem 0;
        }

        .stats-label {
            color: var(--text-light);
            font-size: 0.85rem;
        }

        .chat-container {
            height: 600px;
            overflow-y: auto;
            padding: 1rem;
            margin-bottom: 1rem;
            background: var(--card-bg);
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            transition: background-color 0.3s ease;
        }

        .chat-message {
            padding: 1rem;
            border-radius: 16px;
            max-width: 80%;
            position: relative;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .chat-message.user {
            background: var(--primary);
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 4px;
        }

        .chat-message.assistant {
            background: var(--card-bg);
            border: 1px solid var(--border);
            color: var(--text);
            border-bottom-left-radius: 4px;
        }

        .input-group {
            position: relative;
        }

        .input-group .form-control {
            padding-right: 60px;
            border-radius: 12px;
        }

        .input-group .btn {
            position: absolute;
            right: 4px;
            top: 4px;
            bottom: 4px;
            z-index: 10;
            border-radius: 10px;
            padding: 0 16px;
        }

        /* Charts styling */
        canvas {
            max-width: 100%;
        }

        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--card-bg);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(124, 93, 250, 0.2);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(124, 93, 250, 0.4);
        }

        .dark-mode ::-webkit-scrollbar-track {
            background: var(--background);
        }

        .dark-mode ::-webkit-scrollbar-thumb {
            background: rgba(124, 93, 250, 0.3);
        }

        .activity-ring {
            position: relative;
            width: 100px;
            height: 100px;
            margin: 0 auto;
        }

        .ring-bg {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 8px solid var(--border);
        }

        .ring-progress {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 8px solid var(--primary);
            border-top-color: transparent;
            border-right-color: var(--primary-light);
            transform: rotate(45deg);
        }

        .ring-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text);
        }

        .page-content {
            padding-bottom: 80px;
        }

        /* Floating action button */
        .fab {
            position: fixed;
            bottom: 120px;
            right: 25px;
            width: 56px;
            height: 56px;
            border-radius: 28px;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            box-shadow: 0 4px 15px rgba(124, 93, 250, 0.4);
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 900;
        }

        .fab:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 6px 20px rgba(124, 93, 250, 0.5);
        }

        @keyframes breathe {

            0%,
            100% {
                transform: scale(0.8);
                background-color: var(--primary-light);
            }

            50% {
                transform: scale(1.2);
                background-color: var(--primary-dark);
            }
        }

        .footer {
            background: var(--card-bg);
            padding: 1.5rem;
            border-top: 1px solid var(--border);
            text-align: center;
            color: var(--text-light);
            font-size: 0.85rem;
            display: none;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        /* Desktop header styles */
        .desktop-header {
            display: none;
            background: var(--card-bg);
            padding: 1rem 2rem;
            border-bottom: 1px solid var(--border);
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .desktop-header-nav {
            display: flex;
            gap: 1.5rem;
        }

        .desktop-header-nav-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--text-light);
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .desktop-header-nav-button i {
            font-size: 1.2rem;
            margin-bottom: 0.25rem;
        }

        .desktop-header-nav-button:hover,
        .desktop-header-nav-button.active {
            color: var(--primary);
        }

        .desktop-header-nav-button.active {
            position: relative;
        }

        .desktop-header-nav-button.active::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 40%;
            height: 3px;
            background: var(--primary);
            border-radius: 2px;
        }

        /* Desktop styles */
        @media (min-width: 992px) {
            .app-container {
                flex-direction: column;
                min-height: 100vh;
            }

            .header {
                display: none;
            }

            .desktop-header {
                display: flex;
            }

            .content {
                width: 100%;
                padding: 2rem;
                padding-bottom: 2rem;
            }

            .page-content {
                padding-bottom: 2rem;
            }

            .bottom-nav {
                display: none;
            }

            .footer {
                display: block;
                margin-left: 0;
                width: 100%;
            }

            .fab {
                right: 3rem;
                bottom: 11rem;
            }

            .theme-toggle {
                top: auto;
                bottom: 11rem;
                left: 3rem;
                right: auto;
            }
        }


        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 1rem;
            }

            .content {
                padding: 1rem;
                padding-bottom: 5rem;
                margin-left: 20px;
                margin-right: 20px;
            }

            .mood-buttons {
                grid-template-columns: repeat(2, 1fr);
            }

            .welcome-card {
                padding: 1.5rem;
            }

            .welcome-card h2 {
                font-size: 1.4rem;
            }

            .nav-button i {
                font-size: 1.3rem;
            }

        }

        /* Mood colors */
        .mood-happy {
            --mood-color: var(--secondary);
            --mood-color-light: var(--secondary-light);
        }

        .mood-sad {
            --mood-color: #6682EA;
            --mood-color-light: #8CA0FF;
        }

        .mood-anxious {
            --mood-color: var(--warning);
            --mood-color-light: #FFB76B;
        }

        .mood-calm {
            --mood-color: var(--primary);
            --mood-color-light: var(--primary-light);
        }

        /* Mood history items */
        .mood-history-item.happy {
            border-left-color: var(--secondary);
        }

        .mood-history-item.sad {
            border-left-color: #6682EA;
        }

        .mood-history-item.anxious {
            border-left-color: var(--warning);
        }

        .mood-history-item.calm {
            border-left-color: var(--primary);
        }

        /* Breathing exercise styles */
        .breathing-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .breathing-visualization {
            width: 100%;
            max-width: 300px;
            margin: 2rem auto;
            text-align: center;
        }

        .breathing-meter-container {
            height: 300px;
            width: 60px;
            margin: 0 auto;
            background-color: var(--card-bg);
            border-radius: 30px;
            border: 2px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        .breathing-meter {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 0%;
            background: linear-gradient(to top, var(--primary), var(--primary-light));
            border-radius: 30px;
            transition: height 1s ease-in-out;
        }

        .breathing-label {
            margin-top: 1rem;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary);
            min-height: 2.5rem;
        }

        .breathing-timer {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary);
            margin: 1rem 0;
        }

        .breathing-instructions {
            text-align: center;
            margin-bottom: 1.5rem;
            width: 100%;
        }

        .breathing-phase {
            font-weight: 600;
            color: var(--primary);
        }

        /* Resources section */
        .resource-card {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-radius: 12px;
            background: var(--card-bg);
            margin-bottom: 1rem;
            transition: all 0.2s ease;
            text-decoration: none;
            color: var(--text);
            border: 1px solid var(--border);
        }

        .resource-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .resource-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: rgba(124, 93, 250, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            margin-right: 1rem;
            flex-shrink: 0;
        }

        .resource-content {
            flex: 1;
        }

        .resource-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .resource-description {
            font-size: 0.85rem;
            color: var(--text-light);
        }

        /* Mood insights */
        .insight-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--primary);
        }

        .insight-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        /* Empty state */
        .empty-state {
            text-align: center;
            padding: 2rem;
            color: var(--text-light);
        }

        .empty-state i {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: var(--border);
        }

        /* Mood trends */
        .trend-indicator {
            display: flex;
            align-items: center;
            font-size: 0.85rem;
        }

        .trend-up {
            color: var(--secondary);
        }

        .trend-down {
            color: var(--danger);
        }

        .trend-neutral {
            color: var(--text-light);
        }


        .login-modal-content {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 2rem;
        }

        .settings-menu {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--card-bg);
            border-radius: 16px 16px 0 0;
            padding: 1.5rem;
            box-shadow: 0 -4px 20px var(--shadow);
            z-index: 1001;
            display: none;
            transform: translateY(100%);
            transition: transform 0.3s ease-out;
        }

        .settings-menu.show {
            display: block;
            transform: translateY(0);
        }

        .settings-item {
            padding: 1rem 0;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .footer-link {
            color: var(--text-light);
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .footer-link:hover {
            color: var(--primary);
        }

        .social-icons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-icon {
            color: var(--text-light);
            font-size: 1.2rem;
            transition: color 0.2s ease;
        }

        .social-icon:hover {
            color: var(--primary);
        }

        .desktop-header-nav button.desktop-header-nav-button {
            background: none;
            border: none;
            padding: 0;
            font: inherit;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--text-light);
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .desktop-header-nav button.desktop-header-nav-button:hover,
        .desktop-header-nav button.desktop-header-nav-button.active {
            color: var(--primary);
        }

        .desktop-header-nav button.desktop-header-nav-button.active {
            position: relative;
        }

        .desktop-header-nav button.desktop-header-nav-button.active::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 40%;
            height: 3px;
            background: var(--primary);
            border-radius: 2px;
        }
    </style>
</head>

<body>
    <div class="app-container">
        <div class="desktop-header">
            <div class="header-logo">
                <div class="logo-circle">
                    <i class="bi bi-heart-pulse"></i>
                </div>
                <h1>Mental Health Assistant</h1>
            </div>

            <div class="desktop-header-nav">
                <a href="#" class="desktop-header-nav-button active" onclick="showSection('home')">
                    <i class="bi bi-house"></i>
                    <span>Home</span>
                </a>
                <a href="#" class="desktop-header-nav-button" onclick="showSection('mood')">
                    <i class="bi bi-emoji-smile"></i>
                    <span>Mood</span>
                </a>
                <a href="#" class="desktop-header-nav-button" onclick="showSection('meditation')">
                    <i class="bi bi-peace"></i>
                    <span>Meditate</span>
                </a>
                <a href="#" class="desktop-header-nav-button" onclick="showSection('breathing')">
                    <i class="bi bi-wind"></i>
                    <span>Breathe</span>
                </a>
                <a href="#" class="desktop-header-nav-button" onclick="showSection('coping')">
                    <i class="bi bi-chat-dots"></i>
                    <span>Chat</span>
                </a>
                <button class="desktop-header-nav-button" onclick="showLoginModal()">
                    <i class="bi bi-person"></i>
                    <span>Login</span>
                </button>
            </div>



        </div>


        <div class="header">
            <div class="header-logo">
                <div class="logo-circle">
                    <i class="bi bi-heart-pulse"></i>
                </div>
                <h1>Mental Health Assistant</h1>
            </div>
        </div>

        <div class="content page-content" id="home">
            <div class="welcome-card animate__animated animate__fadeIn">
                <h2>Hello there!</h2>
                <p>How are you feeling today?</p>
            </div>

            <div class="row mt-4">
                <div class="col-lg-8">
                    <div class="card">
                        <div class="card-header">
                            <div>Weekly Overview</div>
                            <div class="card-header-icon">
                                <i class="bi bi-calendar-week"></i>
                            </div>
                        </div>
                        <div class="card-body">
                            <canvas id="meditationBarChart" height="250"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="card">
                        <div class="card-header pie-chart">
                            <div>Mood Distribution</div>
                            <div class="card-header-icon">
                                <i class="bi bi-pie-chart"></i>
                            </div>
                        </div>
                        <div class="card-body">
                            <canvas id="moodPieChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-3">
                <div class="col-md-4 mb-3">
                    <div class="card stats-card">
                        <div class="activity-ring">
                            <div class="ring-bg"></div>
                            <div class="ring-progress" id="streakRing"></div>
                            <div class="ring-text" id="streakText">0</div>
                        </div>
                        <div class="stats-value" id="streak">0</div>
                        <div class="stats-label">Day Streak</div>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="card stats-card">
                        <i class="bi bi-emoji-smile" style="font-size: 2rem; color: var(--primary); opacity: 0.8;"></i>
                        <div class="stats-value" id="todayMood">None</div>
                        <div class="stats-label">Today's Mood</div>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="card stats-card">
                        <i class="bi bi-clock-history"
                            style="font-size: 2rem; color: var(--primary); opacity: 0.8;"></i>
                        <div class="stats-value" id="todayMeditation">0</div>
                        <div class="stats-label">Minutes Meditated Today</div>
                    </div>
                </div>
            </div>

            <div class="card mt-4">
                <div class="card-header">
                    <div>Mood Insights</div>
                    <div class="card-header-icon">
                        <i class="bi bi-lightbulb"></i>
                    </div>
                </div>
                <div class="card-body">
                    <div id="moodInsights">
                        <div class="insight-card">
                            <div class="insight-title">Weekly Mood Trend</div>
                            <div id="moodTrendText">Loading insights...</div>
                        </div>
                        <div class="insight-card">
                            <div class="insight-title">Meditation Impact</div>
                            <div id="meditationImpactText">Analyzing your data...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="content page-content" id="mood" style="display: none;">
            <div class="card animate__animated animate__fadeIn">
                <div class="card-header">
                    <div>Mood Check-in</div>
                    <div class="card-header-icon">
                        <i class="bi bi-emoji-smile"></i>
                    </div>
                </div>
                <div class="card-body">
                    <h5 class="mb-3">How are you feeling right now?</h5>
                    <div class="mood-buttons">
                        <button class="mood-button" data-mood="happy">
                            😊
                            <span>Happy</span>
                        </button>
                        <button class="mood-button" data-mood="sad">
                            😢
                            <span>Sad</span>
                        </button>
                        <button class="mood-button" data-mood="anxious">
                            😟
                            <span>Anxious</span>
                        </button>
                        <button class="mood-button" data-mood="calm">
                            😌
                            <span>Calm</span>
                        </button>
                    </div>
                    <div class="mt-4">
                        <label class="form-label">Or describe your mood:</label>
                        <input type="text" class="form-control" id="customMood"
                            placeholder="Enter your current state of mind" />
                    </div>
                    <div class="mt-3">
                        <label class="form-label">Add notes (optional):</label>
                        <textarea class="form-control" id="moodNotes" rows="3"
                            placeholder="What's contributing to how you feel?"></textarea>
                    </div>
                    <button class="btn btn-primary w-100 mt-4" onclick="logMood()">Save Mood</button>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div>Mood History</div>
                    <div class="card-header-icon">
                        <i class="bi bi-clock-history"></i>
                    </div>
                </div>
                <div class="card-body">
                    <div id="moodHistory" class="history-container">
                    </div>
                </div>
            </div>
        </div>

        <div class="content page-content" id="meditation" style="display: none;">
            <div class="card animate__animated animate__fadeIn">
                <div class="card-header">
                    <div>Log Meditation Session</div>
                    <div class="card-header-icon">
                        <i class="bi bi-peace"></i>
                    </div>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <label class="form-label">Session Type</label>
                        <select class="form-select" id="meditationType">
                            <option value="Mindfulness">Mindfulness</option>
                            <option value="Stress Relief">Stress Relief</option>
                            <option value="Focus">Focus</option>
                            <option value="Sleep">Sleep</option>
                            <option value="Gratitude">Gratitude</option>
                            <option value="Loving-Kindness">Loving-Kindness</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Duration (minutes)</label>
                        <input type="number" class="form-control" id="meditationDuration"
                            placeholder="Enter meditation duration" />
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Notes (optional)</label>
                        <textarea class="form-control" id="meditationNotes" rows="2"
                            placeholder="How did the session go?"></textarea>
                    </div>
                    <button class="btn btn-primary w-100" onclick="logMeditation()">Save Session</button>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div>Meditation History</div>
                    <div class="card-header-icon">
                        <i class="bi bi-clock-history"></i>
                    </div>
                </div>
                <div class="card-body">
                    <div id="meditationHistory" class="history-container">
                    </div>
                </div>
            </div>
        </div>

        <div class="content page-content" id="coping" style="display: none;">
            <div class="card animate__animated animate__fadeIn">
                <div class="card-header">
                    <div>AI Coping Assistant</div>
                    <div class="card-header-icon">
                        <i class="bi bi-chat-dots"></i>
                    </div>
                </div>
                <div class="card-body">
                    <div class="chat-container" id="chatContainer">
                        <div class="chat-message assistant">Hi there! I'm your mental health assistant. How can I help
                            you today?</div>
                    </div>
                    <div class="input-group mt-3">
                        <input type="text" class="form-control" id="userInput"
                            placeholder="Type your message here..." />
                        <button class="btn btn-primary" onclick="sendMessage()">
                            <i class="bi bi-send"></i>
                        </button>
                    </div>
                    <div class="mt-3 text-center">
                        <button class="btn btn-outline-primary me-2" onclick="addSuggestion('I feel stressed')">I feel
                            stressed</button>
                        <button class="btn btn-outline-primary me-2" onclick="addSuggestion('Help me relax')">Help me
                            relax</button>
                        <button class="btn btn-outline-primary"
                            onclick="addSuggestion('I need coping strategies')">Coping strategies</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="content page-content" id="breathing" style="display: none;">
            <div class="card animate__animated animate__fadeIn">
                <div class="card-header">
                    <div>Deep Breathing Exercise</div>
                    <div class="card-header-icon">
                        <i class="bi bi-wind"></i>
                    </div>
                </div>
                <div class="card-body breathing-container">
                    <div class="breathing-instructions">
                        <h5 class="mb-3">4-7-8 Breathing Technique</h5>
                        <p>This exercise helps reduce anxiety and improve relaxation.</p>
                        <p>Current phase: <span class="breathing-phase" id="breathPhase">Ready to begin</span></p>
                        <div class="breathing-timer" id="breathTimer">0:00</div>
                    </div>
                    <div class="breathing-visualization">
                        <div class="breathing-meter-container">
                            <div class="breathing-meter" id="breathingMeter"></div>
                        </div>
                        <div class="breathing-label" id="breathingLabel">Breathe In</div>
                    </div>
                    <button class="btn btn-primary w-100 mt-4" id="startBreathingBtn"
                        onclick="startBreathingExercise()">
                        Start Exercise
                    </button>
                    <button class="btn btn-outline-primary w-100 mt-2" id="stopBreathingBtn" style="display: none;"
                        onclick="stopBreathingExercise()">
                        End Exercise
                    </button>
                </div>
            </div>
        </div>

        <div class="content page-content" id="resources" style="display: none;">
            <div class="card animate__animated animate__fadeIn">
                <div class="card-header">
                    <div>Mental Health Resources</div>
                    <div class="card-header-icon">
                        <i class="bi bi-book"></i>
                    </div>
                </div>
                <div class="card-body">
                    <a href="https://www.nimh.nih.gov/health/topics" class="resource-card" target="_blank">
                        <div class="resource-icon">
                            <i class="bi bi-journal-medical"></i>
                        </div>
                        <div class="resource-content">
                            <div class="resource-title">NIMH Mental Health Topics</div>
                            <div class="resource-description">Information about mental health disorders from the
                                National Institute of Mental Health</div>
                        </div>
                    </a>

                    <a href="https://www.psychologytoday.com/us" class="resource-card" target="_blank">
                        <div class="resource-icon">
                            <i class="bi bi-search-heart"></i>
                        </div>
                        <div class="resource-content">
                            <div class="resource-title">Find a Therapist</div>
                            <div class="resource-description">Search for licensed mental health professionals in your
                                area</div>
                        </div>
                    </a>

                    <a href="https://www.crisistextline.org/" class="resource-card" target="_blank">
                        <div class="resource-icon">
                            <i class="bi bi-telephone"></i>
                        </div>
                        <div class="resource-content">
                            <div class="resource-title">Crisis Text Line</div>
                            <div class="resource-description">Text HOME to 741741 for free, 24/7 crisis counseling</div>
                        </div>
                    </a>

                    <a href="https://www.headspace.com/" class="resource-card" target="_blank">
                        <div class="resource-icon">
                            <i class="bi bi-cloud-sun"></i>
                        </div>
                        <div class="resource-content">
                            <div class="resource-title">Headspace</div>
                            <div class="resource-description">Guided meditation and mindfulness exercises</div>
                        </div>
                    </a>
                </div>
            </div>
        </div>

        <button class="fab" onclick="quickCheckIn()">
            <i class="bi bi-plus"></i>
        </button>

        <div class="bottom-nav">
            <button id="nav-home" class="nav-button active" onclick="showSection('home')">
                <i class="bi bi-house"></i>
                <span>Home</span>
            </button>
            <button id="nav-mood" class="nav-button" onclick="showSection('mood')">
                <i class="bi bi-emoji-smile"></i>
                <span>Mood</span>
            </button>
            <button id="nav-meditation" class="nav-button" onclick="showSection('meditation')">
                <i class="bi bi-peace"></i>
                <span>Meditate</span>
            </button>
            <button id="nav-breathing" class="nav-button" onclick="showSection('breathing')">
                <i class="bi bi-wind"></i>
                <span>Breathe</span>
            </button>
            <button class="nav-button" onclick="toggleSettingsMenu()">
                <i class="bi bi-gear"></i>
                <span>Settings</span>
            </button>
        </div>

        <div class="settings-menu" id="settingsMenu">
            <div class="settings-item">
                <span>Dark Mode</span>
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="darkModeSwitch" onclick="toggleDarkMode()">
                </div>
            </div>
            <div class="settings-item">
                <span>Notifications</span>
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="notificationsSwitch" checked>
                </div>
            </div>
            <div class="settings-item" onclick="showLoginModal()">
                <span>Login / Sign Up</span>
                <i class="bi bi-chevron-right"></i>
            </div>
            <div class="settings-item" onclick="logout()" id="logoutItem" style="display: none;">
                <span>Log Out</span>
                <i class="bi bi-box-arrow-right"></i>
            </div>
        </div>

        <div class="footer">
            <div class="social-icons">
                <a href="#" class="social-icon"><i class="bi bi-facebook"></i></a>
                <a href="#" class="social-icon"><i class="bi bi-twitter"></i></a>
                <a href="#" class="social-icon"><i class="bi bi-instagram"></i></a>
                <a href="#" class="social-icon"><i class="bi bi-linkedin"></i></a>
            </div>
            <div class="footer-links">
                <a href="#" class="footer-link">About</a>
                <a href="#" class="footer-link">Privacy Policy</a>
                <a href="#" class="footer-link">Terms</a>
                <a href="#" class="footer-link">Contact</a>
            </div>
            <p class="mt-3">Mental Health Assistant &copy; 2023 | Designed with care</p>
        </div>

        <div class="modal fade" id="loginModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content login-modal-content">
                    <div class="modal-header border-0">
                        <h5 class="modal-title">Welcome Back</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" id="loginEmail" placeholder="Enter your email">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-control" id="loginPassword"
                                placeholder="Enter your password">
                        </div>
                        <button class="btn btn-primary w-100 mb-3" onclick="login()">Login</button>
                        <div class="text-center">
                            <p class="small">Don't have an account? <a href="#" onclick="showSignupForm()">Sign up</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let moodHistory = JSON.parse(localStorage.getItem('moodHistory')) || [];
        let meditationHistory = JSON.parse(localStorage.getItem('meditationHistory')) || [];
        let moodChart = null;
        let meditationChart = null;
        let selectedMood = null;
        let breathingInterval = null;
        let breathingPhase = 'ready';
        let breathingStartTime = null;
        let breathingDuration = 0;
        let breathingCycleCount = 0;
        let currentAnimation = null;

        document.addEventListener('DOMContentLoaded', () => {
            initializeMoodButtons();
            updateAllData();
            showSection('home');
            updateStreakRing();
            generateMoodInsights();

            const themeToggle = document.createElement('div');
            themeToggle.className = 'theme-toggle';
            themeToggle.innerHTML = '<i class="bi bi-moon"></i>';
            document.body.appendChild(themeToggle);

            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

            if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                document.body.classList.add('dark-mode');
                themeToggle.innerHTML = '<i class="bi bi-sun"></i>';
            }

            // Initialize dark mode switch
            const darkModeSwitch = document.getElementById('darkModeSwitch');
            if (darkModeSwitch) {
                darkModeSwitch.checked = document.body.classList.contains('dark-mode');
            }

            // Toggle theme on button click
            themeToggle.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                const isDark = document.body.classList.contains('dark-mode');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                themeToggle.innerHTML = isDark ? '<i class="bi bi-sun"></i>' : '<i class="bi bi-moon"></i>';
                if (darkModeSwitch) {
                    darkModeSwitch.checked = isDark;
                }
            });

            // Check if desktop view and adjust navigation
            if (window.innerWidth >= 992) {
                document.querySelector('.bottom-nav').style.display = 'none';
            }
        });

        document.addEventListener('click', function (event) {
            const settingsMenu = document.getElementById('settingsMenu');
            const settingsButton = document.querySelector('.bottom-nav button[onclick="toggleSettingsMenu()"]');

            if (settingsMenu && settingsMenu.style.display === 'block' &&
                !settingsMenu.contains(event.target) &&
                event.target !== settingsButton &&
                !settingsButton.contains(event.target)) {
                toggleSettingsMenu();
            }
        });

        function showSection(sectionId) {
            // Hide all sections
            ['home', 'mood', 'meditation', 'coping', 'breathing', 'resources'].forEach(id => {
                document.getElementById(id).style.display = 'none';
                document.getElementById('nav-' + id)?.classList.remove('active');
            });

            // Show selected section
            document.getElementById(sectionId).style.display = 'block';
            document.getElementById('nav-' + sectionId)?.classList.add('active');

            // Update desktop nav
            document.querySelectorAll('.desktop-header-nav-button').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('onclick').includes(sectionId)) {
                    btn.classList.add('active');
                }
            });

            // Load section-specific data
            if (sectionId === 'mood') displayMoodHistory();
            if (sectionId === 'meditation') displayMeditationHistory();
            if (sectionId === 'home') {
                updateAllData();
                generateMoodInsights();
            }
            if (sectionId === 'breathing') {
                stopBreathingExercise();
            }
        }

        function initializeMoodButtons() {
            document.querySelectorAll('.mood-button').forEach(button => {
                button.addEventListener('click', () => {
                    selectedMood = button.getAttribute('data-mood');
                    document.querySelectorAll('.mood-button').forEach(btn => btn.classList.remove('selected'));
                    button.classList.add('selected');
                });
            });
        }

        function showSignupForm() {
            showToast('Link to sign up page');
            const modal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
            modal.hide();
        }

        function logMood() {
            let mood = selectedMood || document.getElementById('customMood').value.trim();
            if (!mood) {
                showToast('Please select or describe your mood', 'danger');
                return;
            }

            const notes = document.getElementById('moodNotes').value.trim();
            const date = new Date().toISOString();

            moodHistory.push({
                date,
                mood,
                notes,
                intensity: calculateMoodIntensity(mood)
            });

            localStorage.setItem('moodHistory', JSON.stringify(moodHistory));
            resetMoodInput();
            displayMoodHistory();
            updateAllData();
            generateMoodInsights();

            showToast('Mood logged successfully!');
        }

        function calculateMoodIntensity(mood) {
            const moodIntensities = {
                'happy': 8,
                'calm': 7,
                'sad': 4,
                'anxious': 3
            };

            return moodIntensities[mood.toLowerCase()] || 5;
        }

        function resetMoodInput() {
            selectedMood = null;
            document.querySelectorAll('.mood-button').forEach(btn => btn.classList.remove('selected'));
            document.getElementById('customMood').value = '';
            document.getElementById('moodNotes').value = '';
        }

        function displayMoodHistory() {
            const historyDiv = document.getElementById('moodHistory');

            // Sort history in reverse chronological order
            const sortedHistory = [...moodHistory].sort((a, b) => new Date(b.date) - new Date(a.date));

            historyDiv.innerHTML = sortedHistory.length === 0 ?
                '<div class="empty-state"><i class="bi bi-emoji-frown"></i><p>No mood entries yet</p></div>' :
                sortedHistory.map(entry => {
                    const date = new Date(entry.date);
                    const moodClass = entry.mood.toLowerCase();
                    return `
            <div class="history-item mood-history-item ${moodClass}">
              <div class="history-item-header">
                <div>${entryEmoji(entry.mood)} ${entry.mood}</div>
                <div class="history-date">${formatDate(date)}</div>
              </div>
              ${entry.notes ? `<div class="mt-2">${entry.notes}</div>` : ''}
            </div>
          `;
                }).join('');
        }

        function entryEmoji(mood) {
            const emojiMap = {
                'happy': '😊',
                'sad': '😢',
                'anxious': '😟',
                'calm': '😌'
            };
            return emojiMap[mood.toLowerCase()] || '😐';
        }

        function formatDate(date) {
            const now = new Date();
            const diffMs = now - date;
            const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));

            if (diffDays === 0) {
                return `Today at ${date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;
            } else if (diffDays === 1) {
                return `Yesterday at ${date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;
            } else {
                return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            }
        }

        function logMeditation() {
            const type = document.getElementById('meditationType').value;
            const duration = parseInt(document.getElementById('meditationDuration').value);
            const notes = document.getElementById('meditationNotes').value.trim();

            if (!duration || duration <= 0) {
                showToast('Please enter a valid duration', 'danger');
                return;
            }

            const date = new Date().toISOString();
            meditationHistory.push({ date, type, duration, notes });
            localStorage.setItem('meditationHistory', JSON.stringify(meditationHistory));
            document.getElementById('meditationDuration').value = '';
            document.getElementById('meditationNotes').value = '';
            displayMeditationHistory();
            updateAllData();
            generateMoodInsights();

            showToast('Meditation session logged!');
        }

        function displayMeditationHistory() {
            const historyDiv = document.getElementById('meditationHistory');

            // Sort history in reverse chronological order
            const sortedHistory = [...meditationHistory].sort((a, b) => new Date(b.date) - new Date(a.date));

            historyDiv.innerHTML = sortedHistory.length === 0 ?
                '<div class="empty-state"><i class="bi bi-heart"></i><p>No meditation sessions yet</p></div>' :
                sortedHistory.map(entry => {
                    const date = new Date(entry.date);
                    return `
            <div class="history-item">
              <div class="history-item-header">
                <div>${entry.type}</div>
                <div class="history-date">${formatDate(date)}</div>
              </div>
              <div><strong>${entry.duration}</strong> minutes</div>
              ${entry.notes ? `<div class="mt-2">${entry.notes}</div>` : ''}
            </div>
          `;
                }).join('');
        }

        const adviceResponses = {
            "stress": [
                "When stressed, try the 5-4-3-2-1 grounding technique: notice 5 things you see, 4 things you can touch, 3 things you hear, 2 things you smell, and 1 thing you taste.",
                "Progressive muscle relaxation can help with stress. Tense each muscle group for 5 seconds, then release for 30 seconds, working from toes to head.",
                "Consider taking a short walk outside. Nature and movement can help shift your perspective when stressed."
            ],
            "relaxation": [
                "Try deep breathing: inhale for 4 seconds, hold for 7, exhale for 8. Repeat 4 times to activate relaxation.",
                "A warm cup of herbal tea can help relax both body and mind. Chamomile or peppermint are great choices.",
                "Listening to calming music or nature sounds can help your nervous system relax."
            ],
            "coping": [
                "Journaling can be a powerful coping tool. Write about what you're feeling without filtering your thoughts.",
                "Break overwhelming situations into smaller, manageable steps to make them feel more approachable.",
                "Remember that self-care isn't selfish. Taking time for yourself helps you show up better for others too."
            ],
            "default": [
                "How about trying a short mindfulness exercise? Focus on your breath for one minute, noticing the sensations.",
                "Would you like to explore what might be contributing to how you're feeling right now?",
                "Sometimes just naming what you're feeling can help. Would you describe it more?"
            ]
        };

        function sendMessage() {
            const userInput = document.getElementById('userInput').value.trim();
            if (!userInput) return;

            // Add user message
            addChatMessage(userInput, 'user');
            document.getElementById('userInput').value = '';

            // Determine response type based on user input
            let responseType = 'default';
            if (userInput.toLowerCase().includes('stress') || userInput.toLowerCase().includes('stressed')) {
                responseType = 'stress';
            } else if (userInput.toLowerCase().includes('relax')) {
                responseType = 'relaxation';
            } else if (userInput.toLowerCase().includes('coping') || userInput.toLowerCase().includes('strateg')) {
                responseType = 'coping';
            }

            // Simulate AI "typing" indicator
            const chatContainer = document.getElementById('chatContainer');
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'chat-message assistant';
            typingIndicator.innerHTML = '<div class="typing-indicator"><span></span><span></span><span></span></div>';
            chatContainer.appendChild(typingIndicator);
            chatContainer.scrollTop = chatContainer.scrollHeight;

            // Simulate AI response after short delay
            setTimeout(() => {
                chatContainer.removeChild(typingIndicator);

                const responses = adviceResponses[responseType] || adviceResponses.default;
                const randomIndex = Math.floor(Math.random() * responses.length);
                addChatMessage(responses[randomIndex], 'assistant');
            }, 1500 + Math.random() * 1000);
        }

        function addSuggestion(text) {
            document.getElementById('userInput').value = text;
            document.getElementById('userInput').focus();
        }

        function addChatMessage(text, sender) {
            const chatContainer = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender} animate__animated animate__fadeIn`;
            messageDiv.textContent = text;
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function updateAllData() {
            updateMoodChart();
            updateMeditationChart();
            updateStatCards();
        }

        function updateMoodChart() {
            const ctx = document.getElementById('moodPieChart').getContext('2d');

            // Count moods
            const moodCounts = moodHistory.reduce((acc, entry) => {
                const mood = entry.mood.toLowerCase();
                acc[mood] = (acc[mood] || 0) + 1;
                return acc;
            }, {});

            const labels = Object.keys(moodCounts);
            const data = Object.values(moodCounts);

            const backgroundColor = labels.map(mood => {
                const colorMap = {
                    'happy': 'rgba(41, 208, 178, 0.8)',
                    'sad': 'rgba(102, 126, 234, 0.8)',
                    'anxious': 'rgba(236, 164, 83, 0.8)',
                    'calm': 'rgba(124, 93, 250, 0.8)'
                };
                return colorMap[mood] || 'rgba(160, 174, 192, 0.8)';
            });

            if (moodChart) {
                moodChart.destroy();
            }

            moodChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels.map(mood => mood.charAt(0).toUpperCase() + mood.slice(1)),
                    datasets: [{
                        data: data,
                        backgroundColor: backgroundColor,
                        borderColor: 'white',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                boxWidth: 12,
                                font: {
                                    size: 12
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateMeditationChart() {
            const ctx = document.getElementById('meditationBarChart').getContext('2d');

            // Get weekly data
            const today = new Date();
            const oneWeekAgo = new Date(today);
            oneWeekAgo.setDate(today.getDate() - 6);

            const days = [];
            const currentDate = new Date(oneWeekAgo);

            while (currentDate <= today) {
                days.push(new Date(currentDate));
                currentDate.setDate(currentDate.getDate() + 1);
            }

            // Format dates for display
            const dayLabels = days.map(day => {
                return day.toLocaleDateString('en-US', { weekday: 'short' });
            });

            // Get meditation minutes per day
            const dailyMeditation = days.map(day => {
                const startOfDay = new Date(day);
                startOfDay.setHours(0, 0, 0, 0);

                const endOfDay = new Date(day);
                endOfDay.setHours(23, 59, 59, 999);

                return meditationHistory
                    .filter(entry => {
                        const entryDate = new Date(entry.date);
                        return entryDate >= startOfDay && entryDate <= endOfDay;
                    })
                    .reduce((total, entry) => total + entry.duration, 0);
            });

            if (meditationChart) {
                meditationChart.destroy();
            }

            meditationChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: dayLabels,
                    datasets: [{
                        label: 'Meditation (minutes)',
                        data: dailyMeditation,
                        backgroundColor: 'rgba(124, 93, 250, 0.7)',
                        borderColor: 'rgba(124, 93, 250, 1)',
                        borderWidth: 1,
                        borderRadius: 6,
                        barThickness: 18
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                drawBorder: false,
                                color: 'rgba(224, 224, 224, 0.5)'
                            },
                            ticks: {
                                font: {
                                    size: 11
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                font: {
                                    size: 11
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        function updateStatCards() {
            // Calculate streak
            const streak = calculateStreak();
            document.getElementById('streak').textContent = streak;
            document.getElementById('streakText').textContent = streak;

            // Update today's mood
            const todayMood = getTodayMood();
            document.getElementById('todayMood').textContent = todayMood ? todayMood.charAt(0).toUpperCase() + todayMood.slice(1) : 'Not logged';

            // Update today's meditation minutes
            const todayMinutes = getTodayMeditationMinutes();
            document.getElementById('todayMeditation').textContent = todayMinutes;
        }

        function calculateStreak() {
            if (moodHistory.length === 0 && meditationHistory.length === 0) return 0;

            const today = new Date();
            today.setHours(0, 0, 0, 0);

            const allEntries = [...moodHistory, ...meditationHistory]
                .map(entry => {
                    const date = new Date(entry.date);
                    date.setHours(0, 0, 0, 0);
                    return date.getTime();
                })
                .sort((a, b) => b - a);

            // Check if there is an entry today
            const todayTime = today.getTime();
            if (allEntries[0] !== todayTime) return 0;

            let streak = 1;
            for (let i = 1; i < 365; i++) {
                const checkDate = new Date(today);
                checkDate.setDate(today.getDate() - i);
                const checkTime = checkDate.getTime();

                if (allEntries.includes(checkTime)) {
                    streak++;
                } else {
                    break;
                }
            }

            return streak;
        }

        function getTodayMood() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const endOfDay = new Date(today);
            endOfDay.setHours(23, 59, 59, 999);

            const todayEntries = moodHistory.filter(entry => {
                const entryDate = new Date(entry.date);
                return entryDate >= today && entryDate <= endOfDay;
            });

            return todayEntries.length > 0 ? todayEntries[todayEntries.length - 1].mood : null;
        }

        function getTodayMeditationMinutes() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const endOfDay = new Date(today);
            endOfDay.setHours(23, 59, 59, 999);

            return meditationHistory
                .filter(entry => {
                    const entryDate = new Date(entry.date);
                    return entryDate >= today && entryDate <= endOfDay;
                })
                .reduce((total, entry) => total + entry.duration, 0);
        }

        function updateStreakRing() {
            // Visual animation for the streak ring
            const streak = calculateStreak();
            const ringProgress = document.getElementById('streakRing');

            const maxStreak = 30;
            const percentage = Math.min(streak / maxStreak, 1);
            const degrees = 45 + (percentage * 360);

            ringProgress.style.transform = `rotate(${degrees}deg)`;

            // If streak is complete, change border color
            if (percentage >= 1) {
                ringProgress.style.borderColor = 'var(--secondary)';
                ringProgress.style.borderRightColor = 'var(--secondary-light)';
            }
        }

        function quickCheckIn() {
            // Open mood check-in section
            showSection('mood');
        }

        function showToast(message, type = 'success') {
            // Create toast element
            const toast = document.createElement('div');
            toast.style.position = 'fixed';
            toast.style.bottom = window.innerWidth >= 992 ? '30px' : '120px';
            toast.style.left = '50%';
            toast.style.transform = 'translateX(-50%)';
            toast.style.backgroundColor = type === 'danger' ? 'var(--danger)' : 'var(--primary)';
            toast.style.color = 'white';
            toast.style.padding = '10px 20px';
            toast.style.borderRadius = '8px';
            toast.style.zIndex = '1050';
            toast.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.15)';
            toast.style.maxWidth = '90%';
            toast.style.textAlign = 'center';
            toast.style.transition = 'all 0.3s ease';
            toast.textContent = message;

            // Add animation class
            toast.classList.add('animate__animated', 'animate__fadeInUp');

            // Add to body
            document.body.appendChild(toast);

            // Remove after 3 seconds
            setTimeout(() => {
                toast.classList.remove('animate__fadeInUp');
                toast.classList.add('animate__fadeOutDown');
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 500);
            }, 3000);
        }

        function startBreathingExercise() {
            const startBtn = document.getElementById('startBreathingBtn');
            const stopBtn = document.getElementById('stopBreathingBtn');
            const breathPhaseText = document.getElementById('breathPhase');
            const breathingLabel = document.getElementById('breathingLabel');
            const breathTimer = document.getElementById('breathTimer');

            // Reset state
            if (currentAnimation) {
                cancelAnimationFrame(currentAnimation);
            }
            if (breathingInterval) {
                clearInterval(breathingInterval);
            }

            // Initialize exercise
            breathingPhase = 'inhale';
            breathingStartTime = new Date();
            breathingDuration = 0;
            breathingCycleCount = 0;

            // Update UI
            startBtn.style.display = 'none';
            stopBtn.style.display = 'block';
            breathPhaseText.textContent = 'Breathe In (4 seconds)';
            breathingLabel.textContent = 'Breathe In';

            // Start with empty meter
            const breathingMeter = document.getElementById('breathingMeter');
            breathingMeter.style.transition = 'none';
            breathingMeter.style.height = '0%';
            // Force repaint
            breathingMeter.offsetHeight;
            // Enable smooth transitions
            breathingMeter.style.transition = 'height 4s ease-in-out';

            // Start inhale animation
            breathingMeter.style.height = '100%';

            // Start timer
            updateBreathingTimer();
            breathingTimerInterval = setInterval(updateBreathingTimer, 1000);

            // Set up phase changes
            const phaseTimings = {
                inhale: 4000,    // 4 seconds
                hold: 7000,      // 7 seconds
                exhale: 8000     // 8 seconds
            };

            let phaseStartTime = Date.now();

            function breathingCycle() {
                const now = Date.now();
                const phaseElapsed = now - phaseStartTime;
                let nextPhaseDelay = 0;

                if (breathingPhase === 'inhale' && phaseElapsed >= phaseTimings.inhale) {
                    breathingPhase = 'hold';
                    breathPhaseText.textContent = 'Hold (7 seconds)';
                    breathingLabel.textContent = 'Hold';
                    breathingMeter.style.transition = 'none';
                    breathingMeter.style.height = '100%';
                    phaseStartTime = now;
                    nextPhaseDelay = phaseTimings.hold;
                }
                else if (breathingPhase === 'hold' && phaseElapsed >= phaseTimings.hold) {
                    breathingPhase = 'exhale';
                    breathPhaseText.textContent = 'Breathe Out (8 seconds)';
                    breathingLabel.textContent = 'Breathe Out';
                    breathingMeter.style.transition = 'height 8s ease-in-out';
                    breathingMeter.style.height = '0%';
                    phaseStartTime = now;
                    nextPhaseDelay = phaseTimings.exhale;
                }
                else if (breathingPhase === 'exhale' && phaseElapsed >= phaseTimings.exhale) {
                    breathingCycleCount++;
                    if (breathingCycleCount >= 4) {
                        stopBreathingExercise();
                        showToast('Great job completing the breathing exercise!');
                        return;
                    }

                    breathingPhase = 'inhale';
                    breathPhaseText.textContent = 'Breathe In (4 seconds)';
                    breathingLabel.textContent = 'Breathe In';
                    breathingMeter.style.transition = 'height 4s ease-in-out';
                    breathingMeter.style.height = '100%';
                    phaseStartTime = now;
                    nextPhaseDelay = phaseTimings.inhale;
                }

                // Calculate time remaining in current phase
                const timeRemaining = (phaseStartTime + phaseTimings[breathingPhase]) - now;
                breathingInterval = setTimeout(breathingCycle, Math.min(100, timeRemaining));
            }

            // Start the cycle
            breathingInterval = setTimeout(breathingCycle, phaseTimings.inhale);
            breathingInterval.timerInterval = timerInterval;
        }

        function stopBreathingExercise() {
            // Clear all intervals and timeouts
            if (breathingInterval) {
                clearTimeout(breathingInterval);
            }
            if (breathingTimerInterval) {
                clearInterval(breathingTimerInterval);
                breathingTimerInterval = null;
            }

            // Reset all breathing variables
            breathingPhase = 'ready';
            breathingStartTime = null;
            breathingDuration = 0;
            breathingCycleCount = 0;

            // Update UI
            const startBtn = document.getElementById('startBreathingBtn');
            const stopBtn = document.getElementById('stopBreathingBtn');
            const breathPhaseText = document.getElementById('breathPhase');
            const breathingLabel = document.getElementById('breathingLabel');
            const breathingMeter = document.getElementById('breathingMeter');
            const breathTimer = document.getElementById('breathTimer');

            startBtn.style.display = 'block';
            stopBtn.style.display = 'none';
            breathPhaseText.textContent = 'Ready to begin';
            breathingLabel.textContent = '';
            breathingMeter.style.transition = 'none';
            breathingMeter.style.height = '0%';
            breathTimer.textContent = '0:00';

            // Log the meditation session if it lasted at least 30 seconds
            if (breathingDuration >= 30) {
                const date = new Date().toISOString();
                meditationHistory.push({
                    date,
                    type: "Deep Breathing",
                    duration: Math.ceil(breathingDuration / 60),
                    notes: `Completed ${breathingCycleCount} breathing cycles`
                });
                localStorage.setItem('meditationHistory', JSON.stringify(meditationHistory));
                updateAllData();
                showToast('Breathing exercise added to your meditation history!');
            }
        }

        function updateBreathingTimer() {
            const breathTimer = document.getElementById('breathTimer');
            const now = new Date();
            breathingDuration = Math.floor((now - breathingStartTime) / 1000);
            const minutes = Math.floor(breathingDuration / 60);
            const seconds = breathingDuration % 60;
            breathTimer.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        function generateMoodInsights() {
            if (moodHistory.length < 3) {
                document.getElementById('moodTrendText').textContent = 'Not enough data yet. Check in with your mood more to see trends.';
                document.getElementById('meditationImpactText').textContent = 'Log more moods and meditation sessions to see insights.';
                return;
            }

            // Generate mood trend insight
            const lastWeekMoods = getLastWeekMoods();
            const moodTrend = analyzeMoodTrend(lastWeekMoods);
            document.getElementById('moodTrendText').innerHTML = moodTrend;

            // Generate meditation impact insight
            const meditationImpact = analyzeMeditationImpact();
            document.getElementById('meditationImpactText').innerHTML = meditationImpact;
        }

        function getLastWeekMoods() {
            const today = new Date();
            const oneWeekAgo = new Date(today);
            oneWeekAgo.setDate(today.getDate() - 7);

            return moodHistory
                .filter(entry => new Date(entry.date) >= oneWeekAgo)
                .map(entry => ({
                    date: new Date(entry.date),
                    mood: entry.mood,
                    intensity: entry.intensity || 5
                }));
        }

        function analyzeMoodTrend(moods) {
            if (moods.length === 0) return "No mood data from the past week.";

            // Calculate average mood intensity for the week
            const avgIntensity = moods.reduce((sum, entry) => sum + entry.intensity, 0) / moods.length;

            // Compare to previous week if we have data
            let trendText = "";
            const twoWeeksAgo = new Date();
            twoWeeksAgo.setDate(twoWeeksAgo.getDate() - 14);

            const prevWeekMoods = moodHistory
                .filter(entry => new Date(entry.date) >= twoWeeksAgo && new Date(entry.date) < new Date(twoWeeksAgo.getTime() + 7 * 24 * 60 * 60 * 1000))
                .map(entry => entry.intensity || 5);

            if (prevWeekMoods.length > 0) {
                const prevAvg = prevWeekMoods.reduce((a, b) => a + b, 0) / prevWeekMoods.length;
                const diff = avgIntensity - prevAvg;

                if (Math.abs(diff) < 0.5) {
                    trendText = "Your mood has been relatively stable compared to last week.";
                } else if (diff > 0) {
                    trendText = `Your mood has improved <span class="trend-up">${diff.toFixed(1)} points</span> on average compared to last week.`;
                } else {
                    trendText = `Your mood has decreased <span class="trend-down">${Math.abs(diff).toFixed(1)} points</span> on average compared to last week.`;
                }
            } else {
                trendText = `Your average mood intensity this week is <strong>${avgIntensity.toFixed(1)}/10</strong>.`;
            }

            // Add most common mood
            const moodCounts = {};
            moods.forEach(entry => {
                moodCounts[entry.mood] = (moodCounts[entry.mood] || 0) + 1;
            });

            const mostCommonMood = Object.keys(moodCounts).reduce((a, b) => moodCounts[a] > moodCounts[b] ? a : b);

            return `${trendText} Your most common mood this week was <strong>${mostCommonMood}</strong>.`;
        }

        function analyzeMeditationImpact() {
            if (meditationHistory.length === 0) return "You haven't logged any meditation sessions yet.";

            // Check if user meditated today
            const todayMinutes = getTodayMeditationMinutes();
            let insight = todayMinutes > 0
                ? `Great job meditating for ${todayMinutes} minute${todayMinutes !== 1 ? 's' : ''} today! `
                : "You haven't meditated today. ";

            // Calculate average meditation per day
            const meditationDays = meditationHistory.reduce((days, entry) => {
                const date = new Date(entry.date).toDateString();
                if (!days[date]) {
                    days[date] = 0;
                }
                days[date] += entry.duration;
                return days;
            }, {});

            const avgMinutes = Object.values(meditationDays).reduce((a, b) => a + b, 0) / Object.keys(meditationDays).length;
            insight += `On average, you meditate <strong>${avgMinutes.toFixed(1)} minutes</strong> per session day.`;

            // Check correlation between meditation and mood
            if (moodHistory.length > 0) {
                const meditationDaysWithMood = {};

                meditationHistory.forEach(entry => {
                    const date = new Date(entry.date).toDateString();
                    if (!meditationDaysWithMood[date]) {
                        meditationDaysWithMood[date] = { duration: 0, moods: [] };
                    }
                    meditationDaysWithMood[date].duration += entry.duration;
                });

                moodHistory.forEach(entry => {
                    const date = new Date(entry.date).toDateString();
                    if (meditationDaysWithMood[date]) {
                        meditationDaysWithMood[date].moods.push(entry.intensity || 5);
                    }
                });

                const daysWithBoth = Object.values(meditationDaysWithMood).filter(day => day.moods.length > 0);

                if (daysWithBoth.length > 3) {
                    const meditationBeforeMood = daysWithBoth.filter(day => {
                        return true;
                    });

                    if (meditationBeforeMood.length > 0) {
                        const avgMoodAfterMeditation = meditationBeforeMood.reduce((sum, day) => {
                            return sum + (day.moods.reduce((a, b) => a + b, 0) / day.moods.length);
                        }, 0) / meditationBeforeMood.length;

                        const allMoodAvg = moodHistory.reduce((sum, entry) => sum + (entry.intensity || 5), 0) / moodHistory.length;

                        if (avgMoodAfterMeditation > allMoodAvg + 0.5) {
                            insight += " Your mood tends to be better on days when you meditate!";
                        }
                    }
                }
            }

            return insight;
        }

        let isLoggedIn = false;

        javascript

        function showLoginModal() {
            if (window.innerWidth >= 992) {
                const modal = new bootstrap.Modal(document.getElementById('loginModal'));
                modal.show();
            } else {
                toggleSettingsMenu();
                setTimeout(() => {
                    const modal = new bootstrap.Modal(document.getElementById('loginModal'));
                    modal.show();
                }, 300);
            }
        }

        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            // Simple validation
            if (!email || !password) {
                showToast('Please enter both email and password', 'danger');
                return;
            }

            // Call API here
            isLoggedIn = true;
            showToast('Login successful!');

            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
            modal.hide();

            // Update UI
            updateLoginState();
        }

        function logout() {
            isLoggedIn = false;
            showToast('Logged out successfully');
            updateLoginState();
        }

        function updateLoginState() {
            if (isLoggedIn) {
                document.getElementById('logoutItem').style.display = 'flex';
            } else {
                document.getElementById('logoutItem').style.display = 'none';
            }
        }

        function toggleSettingsMenu() {
            const menu = document.getElementById('settingsMenu');
            if (menu.classList.contains('show')) {
                menu.classList.remove('show');
                // Wait for animation to complete before hiding
                setTimeout(() => {
                    menu.style.display = 'none';
                }, 300);
            } else {
                menu.style.display = 'block';
                // Trigger reflow to enable animation
                menu.offsetHeight;
                menu.classList.add('show');
            }
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            document.querySelector('.theme-toggle i').className = isDark ? 'bi bi-sun' : 'bi bi-moon';
        }
        // Handle window resize for responsive design
        window.addEventListener('resize', () => {
            if (window.innerWidth >= 992) {
                document.querySelector('.bottom-nav').style.display = 'none';
            } else {
                document.querySelector('.bottom-nav').style.display = 'flex';
            }
        });
    </script>
</body>

</html>